{"ast":null,"code":"var _jsxFileName = \"/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/Menu.js\";\nimport React from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport images from './images/food1.jpg';\nimport TableList from './Table';\nimport Food from './Food';\nimport IndividualFood from './IndividualFood';\nimport Drink from './Drink';\nimport Hotpot from './Hotpot';\nimport Other from './Other';\nimport Select from 'react-select'; // import ReactJson from 'react-json-view';\n// import img from '../public/logo192.png'\n\nimport $ from 'jquery';\nconst Numbers = [{\n  label: \"1\",\n  value: 1\n}, {\n  label: \"2\",\n  value: 2\n}, {\n  label: \"3\",\n  value: 3\n}, {\n  label: \"4\",\n  value: 4\n}, {\n  label: \"5\",\n  value: 5\n}, {\n  label: \"6\",\n  value: 6\n}]; // const Colors = [\n//     \"rgb(219, 242, 255)\",\n//     \"rgb(219, 0, 255)\"\n// ]\n\nclass Menu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      heightSet: '',\n      orderList: [],\n      addedList: [],\n      viewTempList: [],\n      currentSelected: '',\n      totalPrice: 0,\n      currentTime: '',\n      seatTaken: null,\n      tb: '' // add_or_edit: true,\n      // customList: [],\n\n    };\n    this.updateDimensions = this.updateDimensions.bind(this);\n    this.BackTableClick = this.BackTableClick.bind(this);\n    this.AddFoodClick = this.AddFoodClick.bind(this);\n    this.AddCustomClick = this.AddCustomClick.bind(this);\n    this.MinusClick = this.MinusClick.bind(this);\n    this.PlusClick = this.PlusClick.bind(this);\n    this.DeleteClick = this.DeleteClick.bind(this);\n    this.CustomClick = this.CustomClick.bind(this);\n    this.DeleteCustomClick = this.DeleteCustomClick.bind(this);\n    this.PlaceOrderClick = this.PlaceOrderClick.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    //update menu window\n    this.updateDimensions();\n    window.addEventListener('scroll', this.updateDimensions);\n    setInterval(() => {\n      this.setState({\n        currentTime: new Date().toLocaleString()\n      }); // let ctime = new Date().toLocaleString();\n\n      let ctime = new Date(\"2020-04-19\").toLocaleString(); //change above to create order early than today\n\n      this.state.addedList.map(item => {\n        item.seatTaken = this.state.seatTaken;\n        item.transTime = ctime;\n        item.totalPrice = this.state.totalPrice;\n      });\n    }, 100); //load view order menu\n\n    if (this.props.chosen_tran !== '') {\n      var cus = [];\n      var changeTime = new Date().toLocaleString();\n      this.props.chosen_tran.map(items => {\n        setTimeout(function () {\n          items.products.map((item, i) => {\n            cus = [];\n            item.custom.map(ind => {\n              cus = cus.concat(ind);\n            });\n            this.setState({\n              currentSelected: '',\n              seatTaken: items.seatTaken,\n              orderList: this.state.orderList.concat({\n                \"name\": item.name,\n                \"price\": parseInt(item.price),\n                \"originalPrice\": parseInt(item.originalPrice),\n                \"quantity\": parseInt(item.quantity),\n                'custom': cus,\n                \"totalPrice\": parseInt(items.totalPrice),\n                \"tableNumber\": items.tableNumber,\n                'transTime': changeTime,\n                'seatTaken': parseInt(items.seatTaken),\n                'id': this.state.orderList.length + 1\n              })\n            }); // alert(item.name+' '+cus[0]+' '+cus[1]);\n          });\n        }.bind(this), 100);\n      });\n      setTimeout(function () {\n        this.setState({\n          addedList: this.state.orderList,\n          totalPrice: 0\n        });\n        this.state.addedList.map(item => this.setState({\n          totalPrice: this.state.totalPrice + item.price\n        }));\n      }.bind(this), 100);\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.updateDimensions);\n  }\n\n  updateDimensions() {\n    if (window.scrollY > 83) {\n      this.setState({\n        heightSet: window.scrollY - \"85\"\n      });\n    } else {\n      this.setState({\n        heightSet: window.scrollY\n      });\n    } // window.innerHeight: 647\n    // document.body.scrollHeight \n\n  }\n\n  BackTableClick(data, e) {\n    e.preventDefault(e);\n    let which_function;\n    which_function = \"\" + data;\n    this.props.BackTableClick(e.target.value, which_function);\n  }\n\n  AddFoodClick(e, data) {\n    // alert(data[0] +' ' + data[1]);\n    // alert(this.state.orderList.length);\n    let check = 0,\n        time = 0;\n    let submitTime = new Date().toLocaleString();\n    this.state.orderList.map(item => {\n      if (item.name == data[0]) {\n        if (time == 0) {\n          var confirmation = window.confirm('訂單內已有相同選項，仍要加入訂單嗎？');\n          time = 1;\n\n          if (confirmation === true) {\n            check = 0;\n          } else {\n            item.quantity = item.quantity + 1;\n            check = 1;\n            let additionalPrice = (item.price - item.originalPrice * (item.quantity - 1)) / (item.quantity - 1);\n            item.price = (item.originalPrice + additionalPrice) * item.quantity;\n          }\n        }\n      }\n\n      item.transTime = submitTime;\n      item.seatTaken = this.state.seatTaken;\n    });\n\n    if (check == 0) {\n      this.setState({\n        // orderList: [...this.state.orderList, ...[data[0], data[1], data[2]] ]\n        orderList: this.state.orderList.concat({\n          \"name\": data[0],\n          \"price\": data[1],\n          \"originalPrice\": data[1],\n          \"quantity\": data[2],\n          \"custom\": [],\n          \"totalPrice\": 0,\n          \"tableNumber\": this.props.tableNumber,\n          \"orderStatus\": '',\n          \"transTime\": submitTime,\n          \"seatTaken\": this.state.seatTaken,\n          \"id\": this.state.orderList.length + 1\n        }) // customList: this.state.customList.concat({\"id\": this.state.orderList.length+1, \"custom\": []}),\n\n      });\n    }\n\n    setTimeout(function () {\n      this.setState({\n        addedList: this.state.orderList,\n        totalPrice: 0\n      });\n      this.state.addedList.map(item => this.setState({\n        totalPrice: this.state.totalPrice + item.price\n      }));\n    }.bind(this), 100);\n  }\n\n  AddCustomClick(e, data) {\n    let check = 0,\n        id = 0;\n    let a = this.state.currentSelected.split(\",\");\n    id = a[1];\n    this.state.orderList.map(item => {\n      if (item.name == a[0] && id == item.id) {\n        item.custom.map(i => {\n          if (i == data[0]) {\n            check = 1;\n          }\n        });\n\n        if (check == 0) {\n          if (id == item.id) {\n            item.custom = item.custom.concat(data[0]);\n\n            if (data[1] != 0) {\n              let additionalPrice = (item.price - item.originalPrice * item.quantity) / item.quantity + data[1];\n              item.price = (item.originalPrice + additionalPrice) * item.quantity;\n            }\n          }\n        }\n      }\n    });\n    setTimeout(function () {\n      this.setState({\n        addedList: this.state.orderList,\n        totalPrice: 0\n      });\n      this.state.addedList.map(item => this.setState({\n        totalPrice: this.state.totalPrice + item.price\n      }));\n    }.bind(this), 100);\n  }\n\n  CustomClick(data, e) {\n    let a = this.state.currentSelected.split(\",\"); // $(a[1]).css(\"backgroundColor: \"+Colors[1]);\n\n    this.setState({\n      currentSelected: data\n    });\n  }\n\n  MinusClick(data, e) {\n    let a = this.state.currentSelected.split(\",\");\n    let id = a[1];\n    this.state.orderList.map(item => {\n      if (item.name == data && id == item.id) {\n        item.quantity = item.quantity - 1;\n        let additionalPrice;\n\n        if (item.quantity < 1) {\n          item.quantity = 1;\n        } else {\n          additionalPrice = (item.price - item.originalPrice * (item.quantity + 1)) / (item.quantity + 1);\n          item.price = (item.originalPrice + additionalPrice) * item.quantity;\n        }\n      }\n    });\n    setTimeout(function () {\n      this.setState({\n        addedList: this.state.orderList,\n        totalPrice: 0\n      });\n      this.state.addedList.map(item => this.setState({\n        totalPrice: this.state.totalPrice + item.price\n      }));\n    }.bind(this), 100);\n  }\n\n  PlusClick(data, e) {\n    let a = this.state.currentSelected.split(\",\");\n    let id = a[1];\n    this.state.orderList.map(item => {\n      if (item.name == data && id == item.id) {\n        item.quantity = item.quantity + 1;\n        let additionalPrice = (item.price - item.originalPrice * (item.quantity - 1)) / (item.quantity - 1);\n        item.price = (item.originalPrice + additionalPrice) * item.quantity;\n      }\n    });\n    setTimeout(function () {\n      this.setState({\n        addedList: this.state.orderList,\n        totalPrice: 0\n      });\n      this.state.addedList.map(item => this.setState({\n        totalPrice: this.state.totalPrice + item.price\n      }));\n    }.bind(this), 100);\n  }\n\n  DeleteClick(data, e) {\n    let a = this.state.currentSelected.split(\",\");\n    let id = a[1]; // alert(id);\n    // alert(data);\n\n    var confirmation = window.confirm('你要刪除此項目嗎?');\n\n    if (confirmation === true) {\n      this.setState({\n        orderList: this.state.orderList.filter(todo => {\n          // alert(todo.id);\n          return todo.id !== parseInt(a[1]); // return todo.name !== data;\n        })\n      });\n      setTimeout(function () {\n        this.setState({\n          addedList: this.state.orderList,\n          totalPrice: 0\n        });\n        this.state.addedList.map(item => this.setState({\n          totalPrice: this.state.totalPrice + item.price\n        }));\n      }.bind(this), 100);\n    }\n  }\n\n  DeleteCustomClick(data, e) {\n    let a = this.state.currentSelected.split(\",\");\n    let id = a[1];\n    let additionalPrice = 0,\n        deduct = 0,\n        multiply = 0;\n    var confirmation = window.confirm('你要刪除此配料嗎?');\n\n    if (confirmation === true) {\n      this.state.orderList.map(item => {\n        if (item.name == a[0] && id == item.id) {\n          item.custom = item.custom.filter(todo => {\n            return todo !== data;\n          });\n          if (\"冰底\" === data || \"外賣\" === data || \"分盒\" === data) //more to add\n            deduct = 1;else if (\"飯\" === data || \"泡飯\" === data) deduct = 5;else if (\"加底\" === data) deduct = 8;else if (\"學生優惠\" === data) deduct = -5;\n          let additionalPrice = (item.price - item.originalPrice * item.quantity) / item.quantity - deduct;\n          item.price = (item.originalPrice + additionalPrice) * item.quantity;\n        }\n      });\n      setTimeout(function () {\n        this.setState({\n          addedList: this.state.orderList,\n          totalPrice: 0\n        });\n        this.state.addedList.map(item => this.setState({\n          totalPrice: this.state.totalPrice + item.price\n        }));\n      }.bind(this), 100);\n    }\n  }\n\n  PlaceOrderClick(datas, e) {\n    e.preventDefault(e);\n\n    if (this.state.totalPrice) {\n      if (this.state.seatTaken) {\n        // alert(datas[0].custom[1]+' '+datas[0].totalPrice +\" \"+ datas[0].name);\n        var products = [];\n        var name = [];\n        var price = [];\n        var originalPrice = [];\n        var quantity = [];\n        var custom = [];\n        var product_size = 0;\n        datas.map((items, index) => {\n          product_size = index + 1;\n          name = name.concat(items.name);\n          price = price.concat(items.price);\n          originalPrice = originalPrice.concat(items.originalPrice);\n          quantity = quantity.concat(items.quantity);\n          items.custom.map((item, i) => {\n            if (i > 0) custom = custom + \",\";\n            custom = custom + item;\n          });\n          custom = custom + \".\";\n        });\n        var added = {\n          'product_size': product_size,\n          'userId': this.props.userId,\n          'name': name.toString(),\n          'price': price.toString(),\n          'originalPrice': originalPrice.toString(),\n          'quantity': quantity.toString(),\n          'custom': custom.toString(),\n          'totalPrice': datas[0].totalPrice,\n          'tableNumber': datas[0].tableNumber,\n          'orderStatus': \"proceeding\",\n          'transTime': datas[0].transTime,\n          'seatTaken': datas[0].seatTaken\n        };\n        if (this.props.chosen_tran !== '') var confirmation = window.confirm('你確定要改單?');else var confirmation = window.confirm('你確定要落單?');\n\n        if (confirmation === true) {\n          // send orderList to database\n          var url = \"http://localhost:3001/inserttransaction\";\n          $.ajax({\n            url: url,\n            method: \"POST\",\n            data: added,\n            xhrFields: {\n              withCredentials: true\n            },\n            success: function (data) {\n              // if (data.message === \"Added Success!\"){\n              if (data.message == \"成功加入訂單！\") {\n                if (this.state.chosen_tran !== \"\") alert(\"成功修改訂單！\");else alert(\"成功加入訂單！\");\n              } // }else if (data.message == \"Error\")\n              // alert(data.message);\n\n            }.bind(this),\n            error: function (xhr, ajaxOptions, thrownError) {\n              alert(xhr.status);\n              alert(thrownError);\n            }\n          }); //change previous order to outdated\n\n          var url = \"http://localhost:3001/updatetran\";\n          var pdata = {\n            \"tranId\": this.props.data_tranId\n          };\n          $.ajax({\n            url: url,\n            method: \"PUT\",\n            data: pdata,\n            xhrFields: {\n              withCredentials: true\n            },\n            success: function (data) {// alert(\"asd\");\n            }.bind(this),\n            error: function (xhr, ajaxOptions, thrownError) {\n              alert(xhr.status);\n              alert(thrownError);\n            }\n          });\n          this.props.PlaceOrderClick(e.target.value, datas);\n        }\n      } else alert(\"請輸入人數！\");\n    } else alert(\"請加入訂單！\");\n  }\n\n  handleChange(e) {\n    const numOfPeople = prompt('請輸入人數:');\n    this.setState({\n      seatTaken: numOfPeople\n    });\n  }\n\n  render() {\n    let totalPrice = 0;\n    this.state.addedList.map(item => totalPrice = totalPrice + item.price);\n    let tablenumber;\n    if (this.props.tableNumber == \"11\") tablenumber = React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475\n      },\n      __self: this\n    }, \"\\u5916\\u8CE3\");else tablenumber = React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477\n      },\n      __self: this\n    }, this.props.tableNumber, \" \\u865F\\u67B1\");\n    let add_or_edit;\n\n    if (this.props.chosen_tran !== '') {\n      add_or_edit = React.createElement(\"li\", {\n        id: \"placeorder_btn\",\n        onClick: this.PlaceOrderClick.bind(this, this.state.addedList),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481\n        },\n        __self: this\n      }, \"\\u6539\\u55AE >\"));\n      if (this.props.chosen_tran[0].tableNumber == \"11\") tablenumber = React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483\n        },\n        __self: this\n      }, \"\\u5916\\u8CE3\");else tablenumber = React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485\n        },\n        __self: this\n      }, this.props.chosen_tran[0].tableNumber, \" \\u865F\\u67B1\");\n    } else add_or_edit = React.createElement(\"li\", {\n      id: \"placeorder_btn\",\n      onClick: this.PlaceOrderClick.bind(this, this.state.addedList),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488\n      },\n      __self: this\n    }, \"\\u843D\\u55AE >\"));\n\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"menu_page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"menu_category\",\n      style: {\n        top: this.state.heightSet\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495\n      },\n      __self: this\n    }, tablenumber, React.createElement(Link, {\n      to: \"/food\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 497\n      },\n      __self: this\n    }, \"\\u5957\\u9910\")), React.createElement(Link, {\n      to: \"/individualFood\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499\n      },\n      __self: this\n    }, \"\\u55AE\\u9EDE\")), React.createElement(Link, {\n      to: \"/drink\",\n      class: \"menu_link\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500\n      },\n      __self: this\n    }, \"\\u98F2\\u54C1\")), React.createElement(Link, {\n      to: \"/hotpot\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501\n      },\n      __self: this\n    }, \"\\u706B\\u934B\\u914D\\u6599\")), React.createElement(Link, {\n      to: \"/other\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502\n      },\n      __self: this\n    }, \"\\u5176\\u4ED6\")))), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/food\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 506\n      },\n      __self: this\n    }, React.createElement(Food, {\n      AddFoodClick: this.AddFoodClick,\n      AddCustomClick: this.AddCustomClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/individualFood\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512\n      },\n      __self: this\n    }, React.createElement(IndividualFood, {\n      AddFoodClick: this.AddFoodClick,\n      AddCustomClick: this.AddCustomClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/drink\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515\n      },\n      __self: this\n    }, React.createElement(Drink, {\n      AddFoodClick: this.AddFoodClick,\n      AddCustomClick: this.AddCustomClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/hotpot\"\n      /*component={Hotpot}*/\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518\n      },\n      __self: this\n    }, React.createElement(Hotpot, {\n      AddFoodClick: this.AddFoodClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/other\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521\n      },\n      __self: this\n    }, React.createElement(Other, {\n      AddFoodClick: this.AddFoodClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"added_item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 526\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"items_name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527\n      },\n      __self: this\n    }, \"\\u5DF2\\u9078\\u64C7\\u8A02\\u55AE:\")), this.state.addedList.map(item => React.createElement(\"div\", {\n      id: item.id\n      /*style={{backgroundColor: Colors[0]}}*/\n      ,\n      class: \"items_added_add\",\n      onClick: this.CustomClick.bind(this, item.name + ',' + item.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"fas fa-times-circle close_btn\",\n      onClick: this.DeleteClick.bind(this, item.name),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      key: item\n      /*contenteditable=\"true\"*/\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531\n      },\n      __self: this\n    }, item.name), React.createElement(\"div\", {\n      key: item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532\n      },\n      __self: this\n    }, \"$\", item.price), React.createElement(\"div\", {\n      key: item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"edit_btn\",\n      onClick: this.MinusClick.bind(this, item.name),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533\n      },\n      __self: this\n    }, \"-\"), \" \", item.quantity, \" \", React.createElement(\"span\", {\n      class: \"edit_btn\",\n      onClick: this.PlusClick.bind(this, item.name),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533\n      },\n      __self: this\n    }, \"+\")), item.custom.map(items => React.createElement(\"div\", {\n      key: items,\n      class: \"del_btn\",\n      onClick: this.DeleteCustomClick.bind(this, items),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536\n      },\n      __self: this\n    }, items))))), React.createElement(\"div\", {\n      class: \"added_item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"items_name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"hover\",\n      onClick: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543\n      },\n      __self: this\n    }, \"\\u4EBA\\u6578\\uFF1A\", this.state.seatTaken)), React.createElement(\"div\", {\n      class: \"items_name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      className: \"hover\",\n      onClick: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544\n      },\n      __self: this\n    }, \"\\u67B1\\u865F\\uFF1A\", this.state.tb)), React.createElement(\"div\", {\n      class: \"items_name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546\n      },\n      __self: this\n    }, \"\\u7E3D\\u8A08: $ \", this.state.totalPrice)), React.createElement(\"div\", {\n      class: \"items_name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547\n      },\n      __self: this\n    }, \"\\u6642\\u9593: \", this.state.currentTime))), React.createElement(\"div\", {\n      class: \"pay_bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      onClick: this.BackTableClick.bind(this, \"1\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554\n      },\n      __self: this\n    }, \"< \\u8FD4\\u56DE\")), add_or_edit))));\n  }\n\n}\n\nexport default Menu;","map":{"version":3,"sources":["/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/Menu.js"],"names":["React","BrowserRouter","Router","Switch","Route","Link","images","TableList","Food","IndividualFood","Drink","Hotpot","Other","Select","$","Numbers","label","value","Menu","Component","constructor","props","state","heightSet","orderList","addedList","viewTempList","currentSelected","totalPrice","currentTime","seatTaken","tb","updateDimensions","bind","BackTableClick","AddFoodClick","AddCustomClick","MinusClick","PlusClick","DeleteClick","CustomClick","DeleteCustomClick","PlaceOrderClick","handleChange","componentDidMount","window","addEventListener","setInterval","setState","Date","toLocaleString","ctime","map","item","transTime","chosen_tran","cus","changeTime","items","setTimeout","products","i","custom","ind","concat","name","parseInt","price","originalPrice","quantity","tableNumber","length","componentWillUnmount","removeEventListener","scrollY","data","e","preventDefault","which_function","target","check","time","submitTime","confirmation","confirm","additionalPrice","id","a","split","filter","todo","deduct","multiply","datas","product_size","index","added","userId","toString","url","ajax","method","xhrFields","withCredentials","success","message","alert","error","xhr","ajaxOptions","thrownError","status","pdata","data_tranId","numOfPeople","prompt","render","tablenumber","add_or_edit","top","textDecoration"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\nimport images from './images/food1.jpg'\nimport TableList from './Table';\nimport Food from './Food';\nimport IndividualFood from './IndividualFood';\nimport Drink from './Drink';\nimport Hotpot from './Hotpot';\nimport Other from './Other';\nimport Select from 'react-select';\n// import ReactJson from 'react-json-view';\n\n// import img from '../public/logo192.png'\n\nimport $ from 'jquery';\n\nconst Numbers = [\n    { label: \"1\", value: 1 },\n    { label: \"2\", value: 2 },\n    { label: \"3\", value: 3 },\n    { label: \"4\", value: 4 },\n    { label: \"5\", value: 5 },\n    { label: \"6\", value: 6 },\n  ];\n\n// const Colors = [\n//     \"rgb(219, 242, 255)\",\n//     \"rgb(219, 0, 255)\"\n// ]\n\nclass Menu extends React.Component{\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        heightSet: '',\n        orderList: [],\n        addedList: [],\n        viewTempList: [],\n        currentSelected: '',\n        totalPrice: 0,\n        currentTime: '',\n        seatTaken: null,\n        tb: '',\n        // add_or_edit: true,\n        // customList: [],\n      }\n        this.updateDimensions = this.updateDimensions.bind(this);\n      this.BackTableClick = this.BackTableClick.bind(this);\n      this.AddFoodClick = this.AddFoodClick.bind(this);\n      this.AddCustomClick = this.AddCustomClick.bind(this);\n      this.MinusClick = this.MinusClick.bind(this);\n      this.PlusClick = this.PlusClick.bind(this);\n      this.DeleteClick = this.DeleteClick.bind(this);\n      this.CustomClick = this.CustomClick.bind(this);\n      this.DeleteCustomClick = this.DeleteCustomClick.bind(this);\n      this.PlaceOrderClick = this.PlaceOrderClick.bind(this);\n      this.handleChange = this.handleChange.bind(this);\n    }\n\n    componentDidMount() {\n        //update menu window\n        this.updateDimensions();\n        window.addEventListener('scroll', this.updateDimensions);\n        setInterval( () => {\n            this.setState({\n              currentTime : new Date().toLocaleString(),\n            })\n            // let ctime = new Date().toLocaleString();\n            let ctime = new Date(\"2020-04-19\").toLocaleString();\n            //change above to create order early than today\n            this.state.addedList.map(item => {\n                item.seatTaken = this.state.seatTaken;\n                item.transTime = ctime;\n                item.totalPrice = this.state.totalPrice;\n            })\n          },100)\n\n        //load view order menu\n        if(this.props.chosen_tran !== ''){\n            var cus = [];\n            var changeTime = new Date().toLocaleString();\n            this.props.chosen_tran.map(items => {\n                setTimeout(function() { \n                items.products.map((item, i) => {\n                    cus = [];\n                    item.custom.map(ind => {\n                        cus = cus.concat(ind);\n                    })\n                    this.setState({\n                    currentSelected: '',\n                    seatTaken: items.seatTaken,\n                    orderList: this.state.orderList.concat({\"name\": item.name, \"price\": parseInt(item.price), \n                    \"originalPrice\": parseInt(item.originalPrice), \"quantity\": parseInt(item.quantity), 'custom': cus,\n                    \"totalPrice\": parseInt(items.totalPrice), \"tableNumber\": items.tableNumber, 'transTime': changeTime, \n                    'seatTaken': parseInt(items.seatTaken), 'id': this.state.orderList.length+1,}),\n                    })\n                    // alert(item.name+' '+cus[0]+' '+cus[1]);\n                })\n                }.bind(this), 100)\n            })\n\n            setTimeout(function() { \n                this.setState({\n                    addedList: this.state.orderList,\n                    totalPrice: 0,\n                })\n                this.state.addedList.map(item => (\n                    this.setState({\n                        totalPrice: this.state.totalPrice + item.price,\n                    })\n                ))\n            }.bind(this), 100)\n        }\n    }\n    \n    componentWillUnmount() {\n        window.removeEventListener('scroll', this.updateDimensions);\n    }\n    \n    updateDimensions() {\n        if(window.scrollY >83){\n            this.setState({heightSet: window.scrollY - \"85\"});\n        }\n        else{\n            this.setState({ heightSet: window.scrollY});\n        }\n        // window.innerHeight: 647\n        // document.body.scrollHeight \n    }\n\n    BackTableClick(data, e){\n        e.preventDefault(e);\n        let which_function;\n            which_function = \"\" + data;\n        this.props.BackTableClick(e.target.value, which_function);\n    }\n\n    AddFoodClick(e, data){\n        // alert(data[0] +' ' + data[1]);\n        // alert(this.state.orderList.length);\n        let check = 0, time = 0;\n        let submitTime = new Date().toLocaleString();\n        this.state.orderList.map(item => {\n                if (item.name == data[0]){\n                    if (time == 0){\n                        var confirmation = window.confirm('訂單內已有相同選項，仍要加入訂單嗎？');\n                        time = 1;\n                        if(confirmation === true){\n                            check = 0;\n                        }else{\n                            item.quantity = item.quantity + 1;\n                            check = 1;\n                       \n                            let additionalPrice = (item.price - item.originalPrice*(item.quantity-1)) / (item.quantity-1)\n                            item.price = (item.originalPrice + additionalPrice) * item.quantity;\n                        }\n                    }\n                }\n                item.transTime = submitTime;\n                item.seatTaken = this.state.seatTaken;\n        })\n        if(check == 0){\n            this.setState({\n                // orderList: [...this.state.orderList, ...[data[0], data[1], data[2]] ]\n                orderList: this.state.orderList.concat({\"name\": data[0], \"price\": data[1], \"originalPrice\": data[1], \n                \"quantity\": data[2], \"custom\": [], \"totalPrice\": 0, \"tableNumber\": this.props.tableNumber, \"orderStatus\": '',\n            \"transTime\": submitTime, \"seatTaken\": this.state.seatTaken, \"id\": this.state.orderList.length+1,}),\n                // customList: this.state.customList.concat({\"id\": this.state.orderList.length+1, \"custom\": []}),\n              })\n               \n        }\n\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n    }\n\n    AddCustomClick(e, data){\n        let check = 0, id = 0;\n        let a = this.state.currentSelected.split(\",\");\n        id = a[1];\n        this.state.orderList.map(item => {\n            if (item.name == a[0] && id == item.id){\n                item.custom.map(i => {\n                    if(i == data[0]){\n                        check = 1;\n                    }\n                })\n                if(check == 0){\n                    if(id == item.id){\n                        item.custom = item.custom.concat(data[0]);\n\n                        if(data[1] != 0){\n                            let additionalPrice = (item.price - item.originalPrice*item.quantity) / item.quantity + data[1]\n                            item.price = (item.originalPrice + additionalPrice) * item.quantity;\n                        }\n                    }\n                }\n            }\n    })\n    setTimeout(function() { \n        this.setState({\n            addedList: this.state.orderList,\n            totalPrice: 0,\n        })\n        this.state.addedList.map(item => (\n            this.setState({\n                totalPrice: this.state.totalPrice + item.price,\n            })\n        ))\n    }.bind(this), 100)\n    }\n\n    CustomClick(data, e){\n        let a = this.state.currentSelected.split(\",\");\n        // $(a[1]).css(\"backgroundColor: \"+Colors[1]);\n        this.setState({\n            currentSelected: data,\n        })\n     }\n    \n      MinusClick(data, e){\n        let a = this.state.currentSelected.split(\",\");\n        let id = a[1];\n        this.state.orderList.map(item => {\n            if (item.name == data && id == item.id){\n                item.quantity = item.quantity - 1;\n                let additionalPrice;\n                if(item.quantity < 1){\n                    item.quantity = 1;\n                }\n                else{\n                    additionalPrice = (item.price - item.originalPrice*(item.quantity+1)) / (item.quantity+1);\n                    item.price = (item.originalPrice + additionalPrice) * item.quantity;\n                }   \n          \n            }\n        })\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n    }\n\n    PlusClick(data, e){\n        let a = this.state.currentSelected.split(\",\");\n        let id = a[1];\n        this.state.orderList.map(item => {\n            if (item.name == data && id == item.id){\n                item.quantity = item.quantity + 1;\n                \n                let additionalPrice = (item.price - item.originalPrice*(item.quantity-1)) / (item.quantity-1)\n                item.price = (item.originalPrice + additionalPrice) * item.quantity;\n            }\n        })\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n  }\n    DeleteClick(data, e){\n    let a = this.state.currentSelected.split(\",\");\n    let id = a[1];\n    // alert(id);\n    // alert(data);\n    var confirmation = window.confirm('你要刪除此項目嗎?');\n    if(confirmation === true){  \n        this.setState({\n            orderList: this.state.orderList.filter (todo => {  \n                // alert(todo.id);\n                return todo.id !== parseInt(a[1]);\n                // return todo.name !== data;\n              })\n        })\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n    }\n}\n\nDeleteCustomClick(data, e){\n    let a = this.state.currentSelected.split(\",\");\n    let id = a[1];\n    let additionalPrice = 0, deduct = 0, multiply = 0;\n    var confirmation = window.confirm('你要刪除此配料嗎?');\n    if(confirmation === true){  \n        this.state.orderList.map(item => {\n            if (item.name == a[0] && id == item.id ){\n                item.custom = item.custom.filter(todo => { return todo !== data; })\n                if(\"冰底\" === data || \"外賣\"  === data|| \"分盒\" === data)  //more to add\n                    deduct = 1;\n                else if(\"飯\"  === data || \"泡飯\" === data)\n                    deduct = 5;\n                else if(\"加底\" === data)\n                    deduct = 8;\n                else if(\"學生優惠\" === data)\n                    deduct = -5;\n                let additionalPrice = (item.price - item.originalPrice*(item.quantity)) / (item.quantity) - deduct;\n                item.price = (item.originalPrice + additionalPrice) * item.quantity;\n            }\n    })\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n    }\n}\n\n    PlaceOrderClick(datas, e){\n        e.preventDefault(e);\n        if(this.state.totalPrice){\n            if(this.state.seatTaken){\n                // alert(datas[0].custom[1]+' '+datas[0].totalPrice +\" \"+ datas[0].name);\n                var products = [];\n                var name = [];\n                var price = [];\n                var originalPrice = [];\n                var quantity = [];\n                var custom = [];\n                var product_size = 0;\n\n                datas.map((items, index) => {\n                    product_size = index+1;\n                    name = name.concat(items.name);\n                    price = price.concat(items.price);\n                    originalPrice = originalPrice.concat(items.originalPrice);\n                    quantity = quantity.concat(items.quantity);\n                    items.custom.map((item,i) => {\n                        if(i>0)\n                            custom = custom+\",\";\n                        custom = custom +item;\n                    })\n                    custom = custom + \".\";\n                })\n\n                var added = {\n                    'product_size': product_size,\n                    'userId': this.props.userId,\n                    'name': name.toString(),\n                    'price': price.toString(),\n                    'originalPrice': originalPrice.toString(),\n                    'quantity': quantity.toString(),\n                    'custom': custom.toString(),\n                    'totalPrice': datas[0].totalPrice,\n                    'tableNumber': datas[0].tableNumber,\n                    'orderStatus': \"proceeding\",\n                    'transTime': datas[0].transTime,\n                    'seatTaken': datas[0].seatTaken,\n                  }\n\n                if(this.props.chosen_tran !== '')\n                    var confirmation = window.confirm('你確定要改單?');\n                else\n                    var confirmation = window.confirm('你確定要落單?');\n                if(confirmation === true){\n                // send orderList to database\n                var url = \"http://localhost:3001/inserttransaction\"\n\n                $.ajax({\n                  url: url,\n                  method: \"POST\",\n                data: added,\n                  xhrFields: {\n                    withCredentials: true\n                  },\n                  success:function(data){\n                    // if (data.message === \"Added Success!\"){\n                        if(data.message == \"成功加入訂單！\"){\n                            if(this.state.chosen_tran !== \"\")\n                                alert(\"成功修改訂單！\");\n                            else\n                            alert(\"成功加入訂單！\");\n                        }\n                    // }else if (data.message == \"Error\")\n                        // alert(data.message);\n                  }.bind(this),\n                  error:function (xhr, ajaxOptions, thrownError) {\n                    alert(xhr.status);\n                    alert(thrownError);\n                  }\n                });\n\n                //change previous order to outdated\n                var url = \"http://localhost:3001/updatetran\";\n                var pdata = {\n                  \"tranId\":this.props.data_tranId,\n                };\n                $.ajax({\n                  url: url,\n                  method: \"PUT\",\n                  data: pdata,\n                  xhrFields: {\n                    withCredentials: true\n                  },\n                  success:function(data){\n                    // alert(\"asd\");\n                  }.bind(this),\n                  error:function (xhr, ajaxOptions, thrownError) {\n                    alert(xhr.status);\n                    alert(thrownError);\n                  }\n                });\n\n\n\n                this.props.PlaceOrderClick(e.target.value, datas);\n                }\n            }\n            else\n                alert(\"請輸入人數！\");\n        }\n        else\n            alert(\"請加入訂單！\");\n    }\n\n    handleChange(e){\n        const numOfPeople = prompt('請輸入人數:');\n        this.setState({\n            seatTaken: numOfPeople,\n        })\n    }\n\n\n    render(){\n        let totalPrice = 0;\n        this.state.addedList.map(item => (\n            totalPrice = totalPrice + item.price\n        ))\n        \n        let tablenumber;\n        if(this.props.tableNumber == \"11\")\n            tablenumber = <li>外賣</li>\n        else tablenumber = \n        <li>{this.props.tableNumber} 號枱</li>\n\n        let add_or_edit;\n        if(this.props.chosen_tran !== ''){\n            add_or_edit = <li id=\"placeorder_btn\" onClick={this.PlaceOrderClick.bind(this, this.state.addedList)}><a>改單 &gt;</a></li>\n            if(this.props.chosen_tran[0].tableNumber == \"11\")\n            tablenumber = <li>外賣</li>\n        else tablenumber = \n            <li>{this.props.chosen_tran[0].tableNumber} 號枱</li>\n        }\n        else\n            add_or_edit = <li id=\"placeorder_btn\" onClick={this.PlaceOrderClick.bind(this, this.state.addedList)}><a>落單 &gt;</a></li>\n\n        return(\n        <Router>\n            <div class=\"menu_page\">\n                <div class=\"menu_category\" style={{top: this.state.heightSet}}>\n                    {/* <h2>類別</h2> */}\n                    <ul>\n                        {tablenumber}\n                        <Link to=\"/food\" style={{ textDecoration: 'none' }}><li>套餐</li></Link>\n                        {/* <li><Link to=\"/menu/specialFood\" style={{ textDecoration: 'none' }}>特餐</Link></li> */}\n                        <Link to=\"/individualFood\" style={{ textDecoration: 'none' }}><li>單點</li></Link>\n                        <Link to=\"/drink\" class=\"menu_link\" style={{ textDecoration: 'none' }}><li>飲品</li></Link>\n                        <Link to=\"/hotpot\" style={{ textDecoration: 'none' }}><li>火鍋配料</li></Link>\n                        <Link to=\"/other\" style={{ textDecoration: 'none' }}><li>其他</li></Link>\n                    </ul>\n                </div>\n                <Switch>\n                    <Route path=\"/food\">\n                        <Food AddFoodClick = {this.AddFoodClick} AddCustomClick = {this.AddCustomClick}/>\n                    </Route>\n                    {/* <Route path=\"/menu/specialFood\">\n                        <SpecialFood />\n                    </Route> */}\n                    <Route path=\"/individualFood\">\n                        <IndividualFood AddFoodClick = {this.AddFoodClick} AddCustomClick = {this.AddCustomClick}/>\n                    </Route>\n                    <Route path=\"/drink\">\n                        <Drink AddFoodClick = {this.AddFoodClick} AddCustomClick = {this.AddCustomClick}/>\n                    </Route>\n                    <Route path=\"/hotpot\" /*component={Hotpot}*/ >\n                        <Hotpot AddFoodClick = {this.AddFoodClick}/>\n                    </Route>\n                    <Route path=\"/other\">\n                        <Other AddFoodClick = {this.AddFoodClick}/>\n                    </Route>\n                </Switch>\n\n                <div class=\"added_item\">\n                <div class=\"items_name\"><p>已選擇訂單:</p></div>\n                    {this.state.addedList.map(item => (\n                        <div id={item.id} /*style={{backgroundColor: Colors[0]}}*/ class=\"items_added_add\" onClick={this.CustomClick.bind(this, item.name+','+item.id)}>\n                            <div class=\"fas fa-times-circle close_btn\" onClick={this.DeleteClick.bind(this, item.name)}></div>\n                            <div key={item} /*contenteditable=\"true\"*/>{item.name}</div>\n                            <div key={item}>${item.price}</div>\n                            <div key={item}><span class=\"edit_btn\" onClick={this.MinusClick.bind(this, item.name)}>-</span> {item.quantity} <span class=\"edit_btn\" onClick={this.PlusClick.bind(this, item.name)}>+</span></div>\n                        \n                            {item.custom.map(items => (\n                                <div key={items} class=\"del_btn\" onClick={this.DeleteCustomClick.bind(this, items)}>{items}</div>\n                            ))}\n                        </div>\n                    ))}\n                </div>\n\n                <div class=\"added_item\">\n                    <div class=\"items_name\"><p className=\"hover\" onClick={this.handleChange}>人數：{this.state.seatTaken}</p></div>\n                    <div class=\"items_name\"><p className=\"hover\" onClick={this.handleChange}>枱號：{this.state.tb}</p></div>\n                    \n                    <div class=\"items_name\"><p>總計: $ {this.state.totalPrice}</p></div>\n                    <div class=\"items_name\"><p>時間: {this.state.currentTime}</p></div>\n                    {/* <Select options={Numbers} placeholder=\"人數\" className=\"dropdown\" onChange={this._handleChange}/> */}\n                </div>\n                \n\n                <div class=\"pay_bottom\">\n                    <ul>\n                        <li onClick={this.BackTableClick.bind(this, \"1\")}><a>&lt; 返回</a></li>\n                        {add_or_edit}\n                        {/* <li id=\"placeorder_btn\" onClick={(event)=>this.PlaceOrderClick(event, this.state.added)}><a>落單 &gt;</a></li> */}\n                    </ul>\n                 </div>\n            </div>\n        </Router>\n        );\n    }\n}\n\n\nexport default Menu;"]},"metadata":{},"sourceType":"module"}