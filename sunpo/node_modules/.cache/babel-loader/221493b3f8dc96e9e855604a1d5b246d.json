{"ast":null,"code":"var _jsxFileName = \"/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/Table.js\";\nimport React from 'react';\nimport Menu from './Menu';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from \"react-router-dom\";\nimport $ from 'jquery';\nimport { timingSafeEqual } from 'crypto';\n\nclass TableList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transinfo: [],\n      tableinfo: [{\n        'tableNumber': '1',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': ['transId1', 'transId2']\n      }, {\n        'tableNumber': '2',\n        'seatTaken': 4,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '3',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': ''\n      }, {\n        'tableNumber': '4',\n        'seatTaken': 0,\n        'maxCap': 6,\n        'isFull': false,\n        'tableColor': ''\n      }, {\n        'tableNumber': '5',\n        'seatTaken': 0,\n        'maxCap': 6,\n        'isFull': true,\n        'tableColor': ''\n      }, {\n        'tableNumber': '6',\n        'seatTaken': 0,\n        'maxCap': 6,\n        'isFull': false,\n        'tableColor': ''\n      }, {\n        'tableNumber': '7',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': ''\n      }, {\n        'tableNumber': '8',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': ''\n      }, {\n        'tableNumber': '9',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': ''\n      }, {\n        'tableNumber': '10',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }]\n    }; //   this.TableClick = this.TableClick.bind(this);\n  }\n\n  componentDidMount() {\n    //get transaction\n    $.ajax({\n      url: \"http://localhost:3001/gettransaction\",\n      method: \"GET\",\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (datas) {\n        if (datas.message === \"Login Success!\") {\n          alert(\"success\");\n        }\n\n        alert(datas.tran[0].products[0].name + \" \" + datas.tran[0].products[0].price + \" \" + datas.tran[0].products[0].originalPrice + \" \" + datas.tran[0].products[0].quantity + \" \" + datas.tran[0].products[0].custom[0] + \" \" + datas.tran[0].totalPrice + ' ' + datas.tran[0].tranId + \" \" + datas.tran[0].tableNumber + \" \" + datas.tran[0].transTime + \" \" + datas.tran[0].orderStatus + \" \" + datas.tran[0].seatTaken); // datas.tran[0].products.name+\" \"+datas.tran[0].products.price+\" \"+\n\n        for (var i in datas.tran) {\n          // datas.map(data => {\n          // alert(i);\n          this.setState({\n            transinfo: this.state.transinfo.concat({\n              \"tranId\": datas.tran[i].tranId,\n              \"userId\": datas.tran[i].userId,\n              \"products\": datas.tran[i].products,\n              \"totalPrice\": datas.tran[i].totalPrice,\n              \"tableNumber\": datas.tran[i].tableNumber,\n              \"orderStatus\": datas.tran[i].orderStatus,\n              \"transTime\": datas.tran[i].transTime,\n              \"seatTaken\": datas.tran[i].seatTaken\n            })\n          }); // })\n        } // alert(this.state.transinfo[1].name+\" \"+this.state.transinfo[1].price);\n\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n    setTimeout(function () {\n      // this.state.transinfo[0].products.map((tran, index) => {\n      //     alert(tran.name+' '+tran.custom[0]);\n      // })\n      this.state.tableinfo.map((table, index) => {\n        this.state.transinfo.map((tran, i) => {\n          if (tran.tableNumber === table.tableNumber) {\n            let items = [...this.state.tableinfo];\n            let item = { ...items[index]\n            };\n            item.seatTaken = tran.seatTaken;\n            item.transaction = item.transaction.concat(tran.tranId);\n            items[index] = item;\n            this.setState({\n              tableinfo: items\n            });\n          }\n        });\n      });\n      this.state.tableinfo.map((table, index) => {\n        if (table.maxCap === table.seatTaken) {\n          // alert(\"maxcap: \"+table.maxCap+\" seatTaken: \"+table.seatTaken);\n          let items = [...this.state.tableinfo];\n          let item = { ...items[index]\n          };\n          item.isFull = true;\n          items[index] = item;\n          this.setState({\n            tableinfo: items\n          });\n        }\n      });\n      this.state.tableinfo.map((table, index) => {\n        if (table.isFull === true) {\n          let items = [...this.state.tableinfo];\n          let item = { ...items[index]\n          };\n          item.tableColor = 'red';\n          items[index] = item;\n          this.setState({\n            tableinfo: items\n          }); // alert(table.tableNumber+' '+table.tableColor);\n        } else {\n          let items = [...this.state.tableinfo];\n          let item = { ...items[index]\n          };\n          item.tableColor = 'palegreen';\n          items[index] = item;\n          this.setState({\n            tableinfo: items\n          });\n        }\n\n        if (table.transaction && table.transaction.length > 0) {\n          alert(\"Table \" + table.tableNumber + \" has transaction\"); // alert(table.transaction[0]);\n        }\n      });\n    }.bind(this), 100);\n  }\n\n  TableClick(data, e) {\n    // alert('Clicked ' + data);\n    // e.preventDefault(e);\n    let which_function;\n\n    if (this.props.payBills === '查閱') {\n      which_function = \"2\" + data;\n    } else {\n      which_function = \"1\" + data;\n    }\n\n    this.props.TableClick(e.target.value, which_function); // alert(which_function);\n  } // TClick = (e, data) => {\n  //     alert('Clicked Table ' + e);\n  // } \n\n\n  render() {\n    let current, functions;\n    functions = React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, this.props.payBills);\n    current = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"table_column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[9].tableColor\n      },\n      id: \"table_10\",\n      class: \"rectangle\",\n      onClick: this.TableClick.bind(this, \"10\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Table 10 \", this.state.tableinfo[9].seatTaken, \" \", this.state.tableinfo[9].transaction[0]), React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[8].tableColor\n      },\n      id: \"table_9\",\n      class: \"rectangle\",\n      onClick: this.TableClick.bind(this, \"9\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Table 9\"), React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[7].tableColor\n      },\n      id: \"table_8\",\n      class: \"rectangle\",\n      onClick: this.TableClick.bind(this, \"8\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Table 8\"), React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[6].tableColor\n      },\n      id: \"table_7\",\n      class: \"rectangle\",\n      onClick: this.TableClick.bind(this, \"7\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Table 7\")), React.createElement(\"div\", {\n      class: \"table_column table_col2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"rectangle2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[5].tableColor\n      },\n      id: \"table_6\",\n      class: \"circle\",\n      onClick: this.TableClick.bind(this, \"6\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Table 6\"), React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[4].tableColor\n      },\n      id: \"table_5\",\n      class: \"circle\",\n      onClick: this.TableClick.bind(this, \"5\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, \"Table 5\"), React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[3].tableColor\n      },\n      id: \"table_4\",\n      class: \"circle\",\n      onClick: this.TableClick.bind(this, \"4\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Table 4\")), React.createElement(\"div\", {\n      class: \"table_column\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"rectangle2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[2].tableColor\n      },\n      id: \"table_3\",\n      class: \"rectangle\",\n      onClick: this.TableClick.bind(this, \"3\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Table 3\"), React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[1].tableColor\n      },\n      id: \"table_2\",\n      class: \"rectangle\",\n      onClick: this.TableClick.bind(this, \"2\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Table 2\"), React.createElement(\"div\", {\n      style: {\n        backgroundColor: this.state.tableinfo[0].tableColor\n      },\n      id: \"table_1\",\n      class: \"rectangle\",\n      onClick: this.TableClick.bind(this, \"1\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Table 1 a \", this.state.tableinfo[0].transaction[0])));\n    return (// <Router>\n\n      /* <Link to=\"/login\">login</Link>\n      <Link to=\"/logout\">logout</Link>\n      <Link to=\"/order\">order</Link>\n      <Link to=\"/paybills\">paybills</Link>\n      <Link to=\"/forecast\">forecast</Link>\n      <Link exact to=\"/\">Home</Link> */\n      React.createElement(\"div\", {\n        class: \"table_page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, functions, current)\n      /* <Switch>\n          <Route path=\"/menus\">\n          <Menu BackTableClick = {this.BackTableClick}\n                        // AddFoodClick = {this.AddFoodClick}\n                        // AddBtnClick = {this.AddBtnClick}\n                        PlaceOrderClick = {this.PlaceOrderClick}\n                        // addedList={this.state.addedList}\n                        tableNumber = {this.props.tableNumber}\n      />\n          </Route>\n      </Switch>\n      </Router>  */\n\n    );\n  }\n\n}\n\nexport default TableList;","map":{"version":3,"sources":["/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/Table.js"],"names":["React","Menu","BrowserRouter","Router","Switch","Route","Link","Redirect","$","timingSafeEqual","TableList","Component","constructor","props","state","transinfo","tableinfo","componentDidMount","ajax","url","method","xhrFields","withCredentials","success","datas","message","alert","tran","products","name","price","originalPrice","quantity","custom","totalPrice","tranId","tableNumber","transTime","orderStatus","seatTaken","i","setState","concat","userId","bind","error","xhr","ajaxOptions","thrownError","status","setTimeout","map","table","index","items","item","transaction","maxCap","isFull","tableColor","length","TableClick","data","e","which_function","payBills","target","value","render","current","functions","backgroundColor"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Menu from './Menu';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    Redirect,\n  } from \"react-router-dom\";\n\nimport $ from 'jquery';\nimport { timingSafeEqual } from 'crypto';\n\n\nclass TableList extends React.Component{\n    constructor(props) {\n      super(props);\n    \n      this.state = {\n        transinfo: [],\n        tableinfo: [{'tableNumber': '1','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': '', 'transaction':['transId1', 'transId2']}, \n      {'tableNumber': '2','seatTaken': 4, 'maxCap': 4, 'isFull': false, 'tableColor': '', 'transaction': []},\n      {'tableNumber': '3','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': ''}, \n      {'tableNumber': '4','seatTaken': 0, 'maxCap': 6, 'isFull': false, 'tableColor': ''}, \n      {'tableNumber': '5','seatTaken': 0, 'maxCap': 6, 'isFull': true,  'tableColor': ''},\n      {'tableNumber': '6','seatTaken': 0, 'maxCap': 6, 'isFull': false, 'tableColor': ''}, \n      {'tableNumber': '7','seatTaken': 0, 'maxCap': 4, 'isFull': false,  'tableColor': ''}, \n      {'tableNumber': '8','seatTaken': 0, 'maxCap': 4, 'isFull': false,  'tableColor': ''},\n      {'tableNumber': '9','seatTaken': 0, 'maxCap': 4, 'isFull': false,  'tableColor': ''}, \n      {'tableNumber': '10','seatTaken': 0, 'maxCap': 4, 'isFull': false,  'tableColor': '', 'transaction':[]}],\n      };\n\n    //   this.TableClick = this.TableClick.bind(this);\n    }\n\n    componentDidMount(){\n\n        //get transaction\n        $.ajax({\n            url:\"http://localhost:3001/gettransaction\",\n            method:\"GET\",\n            xhrFields: {\n              withCredentials: true\n            },\n            success: function(datas){\n                if (datas.message === \"Login Success!\"){\n                    alert(\"success\");\n                }\n                alert(datas.tran[0].products[0].name+\" \"+datas.tran[0].products[0].price+\" \"+datas.tran[0].products[0].originalPrice+\" \"+\n                datas.tran[0].products[0].quantity+\" \"+datas.tran[0].products[0].custom[0]+\" \"+datas.tran[0].totalPrice+' '+\n                datas.tran[0].tranId+\" \"+datas.tran[0].tableNumber+\" \"+datas.tran[0].transTime+\" \"+datas.tran[0].orderStatus+\" \"+datas.tran[0].seatTaken);\n                // datas.tran[0].products.name+\" \"+datas.tran[0].products.price+\" \"+\n                for (var i in datas.tran){\n                // datas.map(data => {\n                    // alert(i);\n                    this.setState({\n                        transinfo: this.state.transinfo.concat({\"tranId\": datas.tran[i].tranId, \"userId\": datas.tran[i].userId, \"products\": datas.tran[i].products, \n                        \"totalPrice\": datas.tran[i].totalPrice, \"tableNumber\": datas.tran[i].tableNumber, \n                        \"orderStatus\": datas.tran[i].orderStatus, \"transTime\": datas.tran[i].transTime, \"seatTaken\": datas.tran[i].seatTaken,}),\n                      });\n                // })\n            }\n\n                // alert(this.state.transinfo[1].name+\" \"+this.state.transinfo[1].price);\n\n            }.bind(this),\n            error: function (xhr, ajaxOptions, thrownError) {\n              alert(xhr.status);\n              alert(thrownError);\n            }\n          });\n        \n        \n        setTimeout(function() { \n            // this.state.transinfo[0].products.map((tran, index) => {\n            //     alert(tran.name+' '+tran.custom[0]);\n            // })\n\n            this.state.tableinfo.map((table, index) => {\n                this.state.transinfo.map((tran, i) => {\n                    if(tran.tableNumber === table.tableNumber){\n                        let items = [...this.state.tableinfo];\n                        let item = {...items[index]};\n                        item.seatTaken = tran.seatTaken;\n                        item.transaction = item.transaction.concat(tran.tranId);\n                        items[index] = item;\n                        this.setState({tableinfo: items});\n                    }\n                })\n            })\n\n            this.state.tableinfo.map((table, index) => {\n\n\n\n                if(table.maxCap === table.seatTaken){\n                    // alert(\"maxcap: \"+table.maxCap+\" seatTaken: \"+table.seatTaken);\n                    let items = [...this.state.tableinfo];\n                    let item = {...items[index]};\n                    item.isFull = true;\n                    items[index] = item;\n                    this.setState({tableinfo: items});\n                }\n            })\n            \n            this.state.tableinfo.map((table, index) => {\n                if(table.isFull === true){\n                    let items = [...this.state.tableinfo];\n                    let item = {...items[index]};\n                    item.tableColor = 'red';\n                    items[index] = item;\n                    this.setState({tableinfo: items});\n                    // alert(table.tableNumber+' '+table.tableColor);\n                }\n                else{\n                    let items = [...this.state.tableinfo];\n                    let item = {...items[index]};\n                    item.tableColor = 'palegreen';\n                    items[index] = item;\n                    this.setState({tableinfo: items});\n                }\n                if(table.transaction && table.transaction.length > 0){\n                    alert(\"Table \"+table.tableNumber + \" has transaction\");\n                    // alert(table.transaction[0]);\n                }\n            }\n                \n            )\n        }.bind(this), 100)\n    }\n\n    TableClick(data, e){\n        // alert('Clicked ' + data);\n        // e.preventDefault(e);\n        let which_function;\n        if(this.props.payBills === '查閱'){\n            which_function = \"2\" + data;\n        }\n        else{\n            which_function = \"1\" + data;\n        }\n        this.props.TableClick(e.target.value, which_function);\n        // alert(which_function);\n    }     \n\n    // TClick = (e, data) => {\n    //     alert('Clicked Table ' + e);\n    // } \n\n\n    render(){\n        let current, functions;\n    functions = <h1>{this.props.payBills}</h1>\n        current = \n        <div >\n            <div class=\"table_column\">\n                <div style={{backgroundColor: this.state.tableinfo[9].tableColor}} id=\"table_10\" class=\"rectangle\" onClick={this.TableClick.bind(this, \"10\")}>Table 10 {this.state.tableinfo[9].seatTaken} {this.state.tableinfo[9].transaction[0]}</div>\n                <div style={{backgroundColor: this.state.tableinfo[8].tableColor}} id=\"table_9\" class=\"rectangle\" onClick={this.TableClick.bind(this, \"9\")}>Table 9</div>\n                <div style={{backgroundColor: this.state.tableinfo[7].tableColor}} id=\"table_8\" class=\"rectangle\" onClick={this.TableClick.bind(this, \"8\")}>Table 8</div>\n                <div style={{backgroundColor: this.state.tableinfo[6].tableColor}} id=\"table_7\" class=\"rectangle\" onClick={this.TableClick.bind(this, \"7\")}>Table 7</div>\n            </div>\n               \n            <div class=\"table_column table_col2\">\n                <div class=\"rectangle2\" ></div>\n                <div style={{backgroundColor: this.state.tableinfo[5].tableColor}} id=\"table_6\" class=\"circle\" onClick={this.TableClick.bind(this, \"6\")}>Table 6</div>\n                <div style={{backgroundColor: this.state.tableinfo[4].tableColor}} id=\"table_5\" class=\"circle\" onClick={this.TableClick.bind(this, \"5\")}>Table 5</div>\n                <div style={{backgroundColor: this.state.tableinfo[3].tableColor}} id=\"table_4\" class=\"circle\" onClick={this.TableClick.bind(this, \"4\")}>Table 4</div>\n            </div>\n               \n            <div class=\"table_column\">\n                <div class=\"rectangle2\" ></div>\n                <div style={{backgroundColor: this.state.tableinfo[2].tableColor}} id=\"table_3\" class=\"rectangle\" onClick={this.TableClick.bind(this, \"3\")}>Table 3</div>\n                <div style={{backgroundColor: this.state.tableinfo[1].tableColor}} id=\"table_2\" class=\"rectangle\" onClick={this.TableClick.bind(this, \"2\")}>Table 2</div>\n                <div style={{backgroundColor: this.state.tableinfo[0].tableColor}} id=\"table_1\" class=\"rectangle\" onClick={this.TableClick.bind(this, \"1\")}>Table 1 a {this.state.tableinfo[0].transaction[0]}</div>\n                {/* <div style={{backgroundColor: 'palegreen'}} id=\"table_1\" class=\"rectangle\" onClick={(e) => this.TClick(\"1\", e)}>Table 1</div> */}\n            </div>\n        </div>\n        return(\n            // <Router>\n                /* <Link to=\"/login\">login</Link>\n                <Link to=\"/logout\">logout</Link>\n                <Link to=\"/order\">order</Link>\n                <Link to=\"/paybills\">paybills</Link>\n                <Link to=\"/forecast\">forecast</Link>\n                <Link exact to=\"/\">Home</Link> */\n            <div class=\"table_page\">\n                {functions}\n                {current}\n            </div>\n\n            /* <Switch>\n                <Route path=\"/menus\">\n                <Menu BackTableClick = {this.BackTableClick}\n                              // AddFoodClick = {this.AddFoodClick}\n                              // AddBtnClick = {this.AddBtnClick}\n                              PlaceOrderClick = {this.PlaceOrderClick}\n                              // addedList={this.state.addedList}\n                              tableNumber = {this.props.tableNumber}\n        />\n                </Route>\n            </Switch>\n            </Router>  */\n        );\n    }\n}\n\nexport default TableList;"]},"metadata":{},"sourceType":"module"}