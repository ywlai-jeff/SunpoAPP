{"ast":null,"code":"var _jsxFileName = \"/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Content from './Content';\nimport Try from './Try';\nimport TableList from './Table';\nimport Menu from './Menu';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoggedIn: false,\n      username: '',\n      password: '',\n      login_fail: 'WELCOME!',\n      user_type: '',\n      active_function: '',\n      position: '',\n      tableinfo: [{\n        'tableNumber': '1',\n        'seatTaken': false\n      }, {\n        'tableNumber': '2',\n        'seatTaken': false\n      }, {\n        'tableNumber': '3',\n        'seatTaken': false\n      }, {\n        'tableNumber': '4',\n        'seatTaken': false\n      }, {\n        'tableNumber': '5',\n        'seatTaken': false\n      }, {\n        'tableNumber': '6',\n        'seatTaken': false\n      }, {\n        'tableNumber': '7',\n        'seatTaken': false\n      }, {\n        'tableNumber': '8',\n        'seatTaken': false\n      }, {\n        'tableNumber': '9',\n        'seatTaken': false\n      }, {\n        'tableNumber': '10',\n        'seatTaken': false\n      }]\n    };\n    this.usernameChange = this.usernameChange.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.LoginClick = this.LoginClick.bind(this);\n    this.LogoutClick = this.LogoutClick.bind(this);\n    this.OrderClick = this.OrderClick.bind(this);\n    this.TableClick = this.TableClick.bind(this);\n    this.PaybillsClick = this.PaybillsClick.bind(this);\n    this.ForecastClick = this.ForecastClick.bind(this);\n  }\n\n  render() {\n    const isLoggedIn = this.state.isLoggedIn;\n    let current_page, login_page, menu_page, tablelist, nav;\n\n    if (isLoggedIn) {\n      nav = React.createElement(\"div\", {\n        class: \"nav_bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"Hello, \", this.state.username, \"!\"), React.createElement(Content, {\n        OrderClick: this.OrderClick,\n        PaybillsClick: this.PaybillsClick,\n        ForecastClick: this.ForecastClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.LogoutClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, \"Log out\")); // menu_page = <Menu/>\n\n      tablelist = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, this.state.active_function);\n    } else {\n      login_page = React.createElement(Login, {\n        username: this.state.username,\n        password: this.state.password // position={this.state.position}\n        ,\n        onUsernameChange: this.usernameChange,\n        onPasswordChange: this.passwordChange,\n        LoginClick: this.LoginClick,\n        login_fail: this.state.login_fail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"logo_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"SUN PO\"), nav, login_page, tablelist, menu_page);\n  }\n\n  usernameChange(name) {\n    this.setState({\n      username: name\n    });\n  }\n\n  passwordChange(pass) {\n    this.setState({\n      password: pass\n    });\n  }\n\n  componentDidMount() {\n    if (localStorage.loggin === 'true') {\n      this.setState({\n        isLoggedIn: true,\n        username: localStorage.usrname,\n        position: localStorage.position\n      });\n    }\n  }\n\n  LoginClick(e) {\n    if (this.state.username === '' || this.state.password === '') {\n      // alert('Please fill in all fields');\n      this.setState({\n        login_fail: 'PLEASE FILL IN ALL FIELDS!'\n      });\n    } else {\n      localStorage.setItem('usrname', this.state.username);\n      localStorage.setItem('password', this.state.password);\n      var loginInfo = {\n        \"username\": this.state.username,\n        \"password\": this.state.password\n      };\n      $.ajax({\n        url: \"http://localhost:3001/login\",\n        type: 'POST',\n        data: loginInfo,\n        xhrFields: {\n          withCredentials: true\n        },\n        // dataType: 'JSON',\n        success: function (data) {\n          if (data.message === \"Login Success!\") {\n            localStorage.setItem('loggin', 'true');\n            localStorage.setItem('position', data.position);\n            this.setState({\n              isLoggedIn: true,\n              login_fail: 'WELCOME!',\n              position: data.position\n            });\n          } else {\n            this.setState({\n              username: '',\n              password: '',\n              isLoggedIn: false,\n              login_fail: \"LOGIN FAILURE\"\n            });\n          }\n        }.bind(this),\n        error: function (xhr, ajaxOptions, thrownError) {\n          alert(xhr.status);\n          alert(thrownError);\n        }\n      });\n    }\n\n    e.preventDefault(e);\n  }\n\n  LogoutClick() {\n    $.ajax({\n      url: \"http://localhost:3001/logout\",\n      method: \"GET\",\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (data) {\n        // clear stored user state after logout\n        localStorage.setItem('loggin', 'false');\n        localStorage.setItem('usrname', '');\n        localStorage.setItem('password', ''); // clear timer\n        // clearInterval(this.timerID);\n\n        this.setState({\n          username: '',\n          password: '',\n          isLoggedIn: false,\n          login_fail: \"SUCCESSFULLY LOGOUT!\"\n        });\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n  OrderClick(e) {\n    this.setState({\n      active_function: React.createElement(TableList, {\n        active_function: this.state.active_Function // tableinfo={this.state.tableinfo}\n        ,\n        TableClick: this.TableClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      })\n    });\n  }\n\n  TableClick(e, data) {\n    this.setState({\n      active_function: React.createElement(Menu, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      })\n    }); // alert(data);\n  }\n\n  PaybillsClick(e) {\n    this.setState({\n      active_function: React.createElement(TableList, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }) // active_function: <Menu/>,\n\n    });\n  }\n\n  ForecastClick(e) {\n    if (this.state.position == \"manager\") {\n      this.setState({\n        active_function: ''\n      });\n    } else {\n      alert(\"Permitted Action!\");\n    }\n  }\n\n}\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.usernameChange = this.usernameChange.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.LoginClick = this.LoginClick.bind(this);\n  }\n\n  usernameChange(e) {\n    e.preventDefault(e);\n    this.props.onUsernameChange(e.target.value);\n  }\n\n  passwordChange(e) {\n    e.preventDefault(e);\n    this.props.onPasswordChange(e.target.value);\n  }\n\n  LoginClick(e) {\n    e.preventDefault(e);\n    this.props.LoginClick(e);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      class: \"login_form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"p\", {\n      id: \"error_message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \" \", this.props.login_fail, \" \"), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Enter username\",\n      value: this.props.username,\n      onChange: this.usernameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"Enter password\",\n      value: this.props.password,\n      onChange: this.passwordChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary btn-block\",\n      onClick: this.LoginClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/App.js"],"names":["React","Content","Try","TableList","Menu","$","BrowserRouter","Router","Switch","Route","Link","App","Component","constructor","props","state","isLoggedIn","username","password","login_fail","user_type","active_function","position","tableinfo","usernameChange","bind","passwordChange","LoginClick","LogoutClick","OrderClick","TableClick","PaybillsClick","ForecastClick","render","current_page","login_page","menu_page","tablelist","nav","name","setState","pass","componentDidMount","localStorage","loggin","usrname","e","setItem","loginInfo","ajax","url","type","data","xhrFields","withCredentials","success","message","error","xhr","ajaxOptions","thrownError","alert","status","preventDefault","method","active_Function","Login","onUsernameChange","target","value","onPasswordChange"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Content from './Content';\nimport Try from './Try';\nimport TableList from './Table';\nimport Menu from './Menu';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\n\nclass App extends React.Component{\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      isLoggedIn: false,\n      username: '',\n      password: '',\n      login_fail: 'WELCOME!',\n      user_type: '',\n      active_function: '',\n      position: '',\n      tableinfo: [{'tableNumber': '1','seatTaken': false}, {'tableNumber': '2','seatTaken': false},\n      {'tableNumber': '3','seatTaken': false}, {'tableNumber': '4','seatTaken': false}, {'tableNumber': '5','seatTaken': false},\n      {'tableNumber': '6','seatTaken': false}, {'tableNumber': '7','seatTaken': false}, {'tableNumber': '8','seatTaken': false},\n      {'tableNumber': '9','seatTaken': false}, {'tableNumber': '10','seatTaken': false}],\n    };\n    this.usernameChange = this.usernameChange.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.LoginClick = this.LoginClick.bind(this);\n    this.LogoutClick = this.LogoutClick.bind(this);\n    this.OrderClick = this.OrderClick.bind(this);\n    this.TableClick = this.TableClick.bind(this);    \n    this.PaybillsClick = this.PaybillsClick.bind(this);\n    this.ForecastClick = this.ForecastClick.bind(this);\n  }\n\n  render(){\n    const isLoggedIn = this.state.isLoggedIn;\n    let current_page, login_page, menu_page, tablelist, nav;\n\n    if (isLoggedIn) {\n      nav = <div class=\"nav_bar\">\n              {/* <Try /> */}\n              <div>Hello, {this.state.username}!</div>\n              <Content \n              OrderClick = {this.OrderClick}\n              PaybillsClick = {this.PaybillsClick}\n              ForecastClick = {this.ForecastClick}\n              />\n              <button onClick={this.LogoutClick}>Log out</button>\n            </div>\n      // menu_page = <Menu/>\n        tablelist = <div>{this.state.active_function}</div>\n    }\n    else{\n      login_page = <Login\n      username={this.state.username}\n      password={this.state.password}\n      // position={this.state.position}\n      onUsernameChange={this.usernameChange}\n      onPasswordChange={this.passwordChange}\n      LoginClick={this.LoginClick}\n      login_fail={this.state.login_fail}\n      />;\n      \n    }\n  \n    return (\n     <div className=\"App\">\n      <div id=\"logo_title\">SUN PO</div>\n        {nav}\n        {login_page}\n        {tablelist}\n        {menu_page}\n      </div>\n     \n    );\n  }\n\n  usernameChange(name) {\n    this.setState({\n      username: name\n    })\n  }\n  \n  passwordChange(pass) {\n    this.setState({\n      password: pass\n    })\n  }\n\n  componentDidMount(){\n    if(localStorage.loggin === 'true'){\n      this.setState({\n        isLoggedIn: true,\n        username: localStorage.usrname,\n        position: localStorage.position,\n      });\n    }\n  }\n\n  LoginClick(e) {\n    if (this.state.username === '' || this.state.password === '') { \n      // alert('Please fill in all fields');\n      this.setState({\n        login_fail: 'PLEASE FILL IN ALL FIELDS!',\n      });\n    }\n    else{\n      localStorage.setItem('usrname', this.state.username);\n      localStorage.setItem('password', this.state.password);\n\n      var loginInfo = {\n        \"username\" : this.state.username,\n        \"password\" : this.state.password,\n      }\n\n      $.ajax({\n        url: \"http://localhost:3001/login\",\n        type: 'POST',\n        data: loginInfo,\n        xhrFields: { withCredentials: true },\n        // dataType: 'JSON',\n        success: function(data) {\n          if (data.message === \"Login Success!\"){\n            localStorage.setItem('loggin','true');\n            localStorage.setItem('position',data.position);\n\n            this.setState({\n              isLoggedIn: true,\n              login_fail: 'WELCOME!',\n              position: data.position,\n            });\n          } else{\n            this.setState({\n              username: '',\n              password: '',\n              isLoggedIn: false,\n              login_fail: \"LOGIN FAILURE\"\n            });\n          }\n        }.bind(this), \n          error: function (xhr, ajaxOptions, thrownError) {\n            alert(xhr.status);\n            alert(thrownError);\n          }\n      });\n      \n  }\n\n  e.preventDefault(e);\n  }\n\n  LogoutClick(){\n    $.ajax({\n      url:\"http://localhost:3001/logout\",\n      method:\"GET\",\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function(data){\n        // clear stored user state after logout\n        localStorage.setItem('loggin','false');\n        localStorage.setItem('usrname','');\n        localStorage.setItem('password','');\n        // clear timer\n        // clearInterval(this.timerID);\n        this.setState({\n          username: '',\n          password: '',\n          isLoggedIn: false,\n          login_fail: \"SUCCESSFULLY LOGOUT!\",\n        });\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n  OrderClick(e){\n    this.setState({\n        active_function: <TableList active_function={this.state.active_Function}\n                                    // tableinfo={this.state.tableinfo}\n                                    TableClick = {this.TableClick}\n                          />,\n      })\n  }\n\n  TableClick(e, data){\n    \n    this.setState({\n        active_function: <Menu/>,\n      })\n      // alert(data);\n  }\n\n  PaybillsClick(e){\n    this.setState({\n        active_function: <TableList/>,\n        // active_function: <Menu/>,\n      })\n  }\n\n  ForecastClick(e){\n    if(this.state.position == \"manager\"){\n      this.setState({\n        active_function: '',\n      })\n    }\n    else{\n      alert(\"Permitted Action!\");\n    }\n  }\n  \n\n}\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n   this.usernameChange = this.usernameChange.bind(this);\n   this.passwordChange = this.passwordChange.bind(this);\n   this.LoginClick = this.LoginClick.bind(this);\n }\n\n  usernameChange(e) {\n    e.preventDefault(e);\n    this.props.onUsernameChange(e.target.value);\n  }\n  \n  passwordChange(e) {\n    e.preventDefault(e);\n    this.props.onPasswordChange(e.target.value);\n  }\n\n  LoginClick(e) {\n    e.preventDefault(e);\n    this.props.LoginClick(e);\n  }\n\n  render() {\n      return (\n        <div >\n          <form class=\"login_form\">\n              <h3>Login</h3>\n\n              <p id=\"error_message\"> {this.props.login_fail} </p>\n\n              <div className=\"form-group\">\n                  <label>Username</label>\n                  <input type=\"text\" className=\"form-control\" placeholder=\"Enter username\" value={this.props.username}\n                  onChange={this.usernameChange}/>\n              </div>\n\n              <div className=\"form-group\">\n                  <label>Password</label>\n                  <input type=\"password\" className=\"form-control\" placeholder=\"Enter password\" value={this.props.password}\n                  onChange={this.passwordChange}/>\n              </div>\n\n              <button type=\"button\" className=\"btn btn-primary btn-block\" onClick={this.LoginClick}>Submit</button>\n            </form>\n          </div>\n      );\n  }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}