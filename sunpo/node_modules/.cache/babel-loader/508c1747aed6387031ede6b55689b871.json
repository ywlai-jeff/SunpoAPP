{"ast":null,"code":"var _jsxFileName = \"/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/Menu.js\";\nimport React from 'react';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport images from './images/food1.jpg';\nimport TableList from './Table';\nimport Food from './Food';\nimport IndividualFood from './IndividualFood';\nimport Drink from './Drink';\nimport Hotpot from './Hotpot';\nimport Other from './Other';\nimport Select from 'react-select'; // import img from '../public/logo192.png'\n\nimport $ from 'jquery';\nconst Numbers = [{\n  label: \"1\",\n  value: 1\n}, {\n  label: \"2\",\n  value: 2\n}, {\n  label: \"3\",\n  value: 3\n}, {\n  label: \"4\",\n  value: 4\n}, {\n  label: \"5\",\n  value: 5\n}, {\n  label: \"6\",\n  value: 6\n}];\n\nclass Menu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      heightSet: '',\n      orderList: [],\n      addedList: [],\n      neworder: [],\n      currentSelected: '',\n      totalPrice: 0,\n      currentTime: '',\n      seatTaken: 0\n    };\n    this.updateDimensions = this.updateDimensions.bind(this);\n    this.BackTableClick = this.BackTableClick.bind(this);\n    this.AddFoodClick = this.AddFoodClick.bind(this);\n    this.AddCustomClick = this.AddCustomClick.bind(this);\n    this.MinusClick = this.MinusClick.bind(this);\n    this.PlusClick = this.PlusClick.bind(this);\n    this.DeleteClick = this.DeleteClick.bind(this);\n    this.CustomClick = this.CustomClick.bind(this);\n    this.DeleteCustomClick = this.DeleteCustomClick.bind(this);\n    this.PlaceOrderClick = this.PlaceOrderClick.bind(this);\n  }\n\n  componentDidMount() {\n    this.updateDimensions();\n    window.addEventListener('scroll', this.updateDimensions);\n    setInterval(() => {\n      this.setState({\n        currentTime: new Date().toLocaleString()\n      });\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('scroll', this.updateDimensions);\n  }\n\n  updateDimensions() {\n    if (window.scrollY > 83) {\n      this.setState({\n        heightSet: window.scrollY - \"85\"\n      });\n    } else {\n      this.setState({\n        heightSet: window.scrollY\n      });\n    } // window.innerHeight: 647\n    // document.body.scrollHeight \n\n  }\n\n  BackTableClick(data, e) {\n    e.preventDefault(e);\n    let which_function;\n    which_function = \"\" + data;\n    this.props.BackTableClick(e.target.value, which_function);\n  }\n\n  AddFoodClick(e, data) {\n    // alert(data[0] +' ' + data[1]);\n    let check = 0;\n    this.state.orderList.map(item => {\n      if (item.name == data[0]) {\n        var confirmation = window.confirm('Different Item?');\n\n        if (confirmation === true) {\n          check = 0;\n        } else {\n          item.quantity = item.quantity + 1;\n          check = 1;\n          let additionalPrice = item.price / item.quantity - 1 - item.originalPrice;\n          item.price = (item.originalPrice + additionalPrice) * item.quantity;\n        }\n      }\n    });\n\n    if (check == 0) {\n      this.setState({\n        // orderList: [...this.state.orderList, ...[data[0], data[1], data[2]] ]\n        orderList: this.state.orderList.concat({\n          \"name\": data[0],\n          \"price\": data[1],\n          \"originalPrice\": data[1],\n          \"quantity\": data[2],\n          \"custom\": []\n          /*\"totalPrice\": '', \"tableNumber\": this.props.tableNumber, \"orderStatus\": '',\n          \"transTime\": new Date().toLocaleString(), \"seatTaken\": 0,*/\n\n        })\n      });\n    }\n\n    setTimeout(function () {\n      this.setState({\n        addedList: this.state.orderList,\n        totalPrice: 0\n      });\n      this.state.addedList.map(item => this.setState({\n        totalPrice: this.state.totalPrice + item.price\n      }));\n    }.bind(this), 100);\n  }\n\n  AddCustomClick(e, data) {\n    this.state.orderList.map(item => {\n      if (item.name == this.state.currentSelected) {\n        item.custom = item.custom.concat(data[0]);\n\n        if (data[1] != 0) {\n          let additionalPrice = item.price / item.quantity - item.originalPrice + data[1];\n          item.price = (item.originalPrice + additionalPrice) * item.quantity;\n        }\n      }\n    });\n    setTimeout(function () {\n      this.setState({\n        addedList: this.state.orderList,\n        totalPrice: 0\n      });\n      this.state.addedList.map(item => this.setState({\n        totalPrice: this.state.totalPrice + item.price\n      }));\n    }.bind(this), 100);\n  }\n\n  CustomClick(data, e) {\n    this.setState({\n      currentSelected: data\n    });\n  }\n\n  MinusClick(data, e) {\n    this.state.orderList.map(item => {\n      if (item.name == data) {\n        item.quantity = item.quantity - 1;\n        let additionalPrice = item.price / (item.quantity + 1) - item.originalPrice;\n\n        if (item.quantity < 1) {\n          item.quantity = 1;\n          additionalPrice = item.price / item.quantity - item.originalPrice;\n        }\n\n        item.price = (item.originalPrice + additionalPrice) * item.quantity;\n      }\n    });\n    setTimeout(function () {\n      this.setState({\n        addedList: this.state.orderList,\n        totalPrice: 0\n      });\n      this.state.addedList.map(item => this.setState({\n        totalPrice: this.state.totalPrice + item.price\n      }));\n    }.bind(this), 100);\n  }\n\n  PlusClick(data, e) {\n    this.state.orderList.map(item => {\n      if (item.name == data) {\n        item.quantity = item.quantity + 1;\n        let additionalPrice = item.price / (item.quantity - 1) - item.originalPrice;\n        item.price = (item.originalPrice + additionalPrice) * item.quantity;\n      }\n    });\n    setTimeout(function () {\n      this.setState({\n        addedList: this.state.orderList,\n        totalPrice: 0\n      });\n      this.state.addedList.map(item => this.setState({\n        totalPrice: this.state.totalPrice + item.price\n      }));\n    }.bind(this), 100);\n  }\n\n  DeleteClick(data, e) {\n    var confirmation = window.confirm('你要刪除此項目嗎?');\n\n    if (confirmation === true) {\n      this.setState({\n        orderList: this.state.orderList.filter(todo => {\n          return todo.name !== data;\n        })\n      });\n      setTimeout(function () {\n        this.setState({\n          addedList: this.state.orderList,\n          totalPrice: 0\n        });\n        this.state.addedList.map(item => this.setState({\n          totalPrice: this.state.totalPrice + item.price\n        }));\n      }.bind(this), 100);\n    }\n  }\n\n  DeleteCustomClick(data, e) {\n    let additionalPrice = 0,\n        deduct = 0;\n    var confirmation = window.confirm('你要刪除此配料嗎?');\n\n    if (confirmation === true) {\n      this.state.orderList.map(item => {\n        if (item.name == this.state.currentSelected) {\n          item.custom = item.custom.filter(todo => {\n            // if(todo === \"冰底\" || todo === \"外賣\" || todo ===  \"分盒\")  //more to add\n            //     deduct = 1;\n            // else if(todo === \"飯\" || todo === \"泡飯\")\n            //     deduct = 5;\n            // else if(todo == \"加底\")\n            //     deduct = 8;\n            // else if(todo == \"學生優惠\")\n            //     deduct = -5;\n            additionalPrice = item.price / item.quantity - item.originalPrice - deduct;\n            item.price = (item.originalPrice + additionalPrice) * item.quantity;\n            return todo !== data;\n          });\n        }\n      });\n      setTimeout(function () {\n        this.setState({\n          addedList: this.state.orderList,\n          totalPrice: 0\n        });\n        this.state.addedList.map(item => this.setState({\n          totalPrice: this.state.totalPrice + item.price\n        }));\n      }.bind(this), 100);\n    }\n  }\n\n  PlaceOrderClick(data, e) {\n    e.preventDefault(e);\n\n    if (this.state.totalPrice) {\n      this.state.addedList.map(item => {\n        item.totalPrice = this.state.totalPrice;\n        this.setState({\n          // currentTime: new Date().toLocaleString(),\n          // orderStatus: 'proceeding',\n          neworder: [{\n            \"totalPrice\": this.state.addedList[0].totalPrice,\n            \"tableNumber\": this.props.tableNumber,\n            \"orderStatus\": 'proceeding',\n            \"transTime\": new Date().toLocaleString(),\n            \"seatTaken\": 0,\n            \"productlist\": this.state.addedList\n          }]\n        });\n      });\n      this.props.PlaceOrderClick(e.target.value, neworder);\n    }\n  } // sizes = [ \"X-Small\", \"Small\", \"Medium\", \"Large\", \"X-Large\", \"2X-Large\" ];\n\n\n  render() {\n    // const added = React.Children.toArray(this.props.addedList, (child) => {\n    //     return React.cloneElement(child);\n    //   });\n    //   const added = this.props.addedList.map(Child => <div>{Child}</div> )\n    // React.Children.forEach(this.props.children, function(){ //independent callback\n    //     console.log(this);  //now it`s obj :)\n    // }, obj);\n    //     const added = (props) =>\n    //     props.addedList.map((item,index)=> \n    // <div key={index}>{item.name}</div>\n    //    );\n    let totalPrice = 0;\n    this.state.addedList.map(item => totalPrice = totalPrice + item.price);\n    return React.createElement(Router, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"menu_page\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"menu_category\",\n      style: {\n        top: this.state.heightSet\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, \"Table \", this.props.tableNumber), React.createElement(Link, {\n      to: \"/food\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, \"\\u5957\\u9910\")), React.createElement(Link, {\n      to: \"/individualFood\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, \"\\u55AE\\u9EDE\")), React.createElement(Link, {\n      to: \"/drink\",\n      class: \"menu_link\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301\n      },\n      __self: this\n    }, \"\\u98F2\\u54C1\")), React.createElement(Link, {\n      to: \"/hotpot\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302\n      },\n      __self: this\n    }, \"\\u706B\\u934B\\u914D\\u6599\")), React.createElement(Link, {\n      to: \"/other\",\n      style: {\n        textDecoration: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, \"\\u5176\\u4ED6\")))), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/food\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, React.createElement(Food, {\n      AddFoodClick: this.AddFoodClick,\n      AddCustomClick: this.AddCustomClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/individualFood\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(IndividualFood, {\n      AddFoodClick: this.AddFoodClick,\n      AddCustomClick: this.AddCustomClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/drink\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, React.createElement(Drink, {\n      AddFoodClick: this.AddFoodClick,\n      AddCustomClick: this.AddCustomClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/hotpot\"\n      /*component={Hotpot}*/\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, React.createElement(Hotpot, {\n      AddFoodClick: this.AddFoodClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    })), React.createElement(Route, {\n      path: \"/other\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }, React.createElement(Other, {\n      AddFoodClick: this.AddFoodClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"added_item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"items_name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, \"\\u5DF2\\u9078\\u64C7\\u8A02\\u55AE:\")), this.state.addedList.map(item => React.createElement(\"div\", {\n      class: \"items_added_add\",\n      onClick: this.CustomClick.bind(this, item.name),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"fas fa-times-circle close_btn\",\n      onClick: this.DeleteClick.bind(this, item.name),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      key: item\n      /*contenteditable=\"true\"*/\n      ,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, item.name), React.createElement(\"div\", {\n      key: item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, \"$\", item.price), React.createElement(\"div\", {\n      key: item,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"edit_btn\",\n      onClick: this.MinusClick.bind(this, item.name),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, \"-\"), \" \", item.quantity, \" \", React.createElement(\"span\", {\n      class: \"edit_btn\",\n      onClick: this.PlusClick.bind(this, item.name),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, \"+\")), item.custom.map(items => React.createElement(\"div\", {\n      key: items,\n      class: \"del_btn\",\n      onClick: this.DeleteCustomClick.bind(this, items),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, items))))), React.createElement(\"div\", {\n      class: \"added_item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"items_name_num\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, \"\\u4EBA\\u6578\\uFF1A\", this.state.seatTaken)), React.createElement(Select, {\n      options: Numbers,\n      placeholder: \"\\u4EBA\\u6578\",\n      className: \"dropdown\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"items_name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346\n      },\n      __self: this\n    }, \"\\u7E3D\\u8A08: $ \", this.state.totalPrice)), React.createElement(\"div\", {\n      class: \"items_name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, \"\\u6642\\u9593: \", this.state.currentTime))), React.createElement(\"div\", {\n      class: \"pay_bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      onClick: this.BackTableClick.bind(this, \"1\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, \"< \\u8FD4\\u56DE\")), React.createElement(\"li\", {\n      id: \"placeorder_btn\",\n      onClick: this.PlaceOrderClick.bind(this, this.state.addedList),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, \"\\u843D\\u55AE >\"))))));\n  }\n\n}\n\nexport default Menu;","map":{"version":3,"sources":["/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/Menu.js"],"names":["React","BrowserRouter","Router","Switch","Route","Link","images","TableList","Food","IndividualFood","Drink","Hotpot","Other","Select","$","Numbers","label","value","Menu","Component","constructor","props","state","heightSet","orderList","addedList","neworder","currentSelected","totalPrice","currentTime","seatTaken","updateDimensions","bind","BackTableClick","AddFoodClick","AddCustomClick","MinusClick","PlusClick","DeleteClick","CustomClick","DeleteCustomClick","PlaceOrderClick","componentDidMount","window","addEventListener","setInterval","setState","Date","toLocaleString","componentWillUnmount","removeEventListener","scrollY","data","e","preventDefault","which_function","target","check","map","item","name","confirmation","confirm","quantity","additionalPrice","price","originalPrice","concat","setTimeout","custom","filter","todo","deduct","tableNumber","render","top","textDecoration","items"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\nimport images from './images/food1.jpg'\nimport TableList from './Table';\nimport Food from './Food';\nimport IndividualFood from './IndividualFood';\nimport Drink from './Drink';\nimport Hotpot from './Hotpot';\nimport Other from './Other';\nimport Select from 'react-select';\n\n// import img from '../public/logo192.png'\n\nimport $ from 'jquery';\n\nconst Numbers = [\n    { label: \"1\", value: 1 },\n    { label: \"2\", value: 2 },\n    { label: \"3\", value: 3 },\n    { label: \"4\", value: 4 },\n    { label: \"5\", value: 5 },\n    { label: \"6\", value: 6 },\n  ];\n\nclass Menu extends React.Component{\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        heightSet: '',\n        orderList: [],\n        addedList: [],\n        neworder: [],\n        currentSelected: '',\n        totalPrice: 0,\n        currentTime: '',\n        seatTaken: 0,\n      }\n        this.updateDimensions = this.updateDimensions.bind(this);\n      this.BackTableClick = this.BackTableClick.bind(this);\n      this.AddFoodClick = this.AddFoodClick.bind(this);\n      this.AddCustomClick = this.AddCustomClick.bind(this);\n      this.MinusClick = this.MinusClick.bind(this);\n      this.PlusClick = this.PlusClick.bind(this);\n      this.DeleteClick = this.DeleteClick.bind(this);\n      this.CustomClick = this.CustomClick.bind(this);\n      this.DeleteCustomClick = this.DeleteCustomClick.bind(this);\n      this.PlaceOrderClick = this.PlaceOrderClick.bind(this);\n    }\n\n    componentDidMount() {\n        this.updateDimensions();\n        window.addEventListener('scroll', this.updateDimensions);\n        setInterval( () => {\n            this.setState({\n              currentTime : new Date().toLocaleString()\n            })\n          },1000)\n    }\n    \n    componentWillUnmount() {\n        window.removeEventListener('scroll', this.updateDimensions);\n    }\n    \n    updateDimensions() {\n        if(window.scrollY >83){\n            this.setState({heightSet: window.scrollY - \"85\"});\n        }\n        else{\n            this.setState({ heightSet: window.scrollY});\n        }\n        // window.innerHeight: 647\n        // document.body.scrollHeight \n    }\n\n    BackTableClick(data, e){\n        e.preventDefault(e);\n        let which_function;\n            which_function = \"\" + data;\n        this.props.BackTableClick(e.target.value, which_function);\n    }\n\n    AddFoodClick(e, data){\n        // alert(data[0] +' ' + data[1]);\n        let check = 0;\n        this.state.orderList.map(item => {\n                if (item.name == data[0]){\n                    var confirmation = window.confirm('Different Item?');\n                    if(confirmation === true){\n                        check = 0;\n                    }else{\n                        item.quantity = item.quantity + 1;\n                        check = 1;\n                        let additionalPrice = item.price/item.quantity-1 - item.originalPrice;\n                        item.price = (item.originalPrice + additionalPrice) * item.quantity;\n                    }\n                }\n        })\n        if(check == 0){\n            this.setState({\n                // orderList: [...this.state.orderList, ...[data[0], data[1], data[2]] ]\n                orderList: this.state.orderList.concat({\"name\": data[0], \"price\": data[1], \"originalPrice\": data[1], \n                \"quantity\": data[2], \"custom\": [], /*\"totalPrice\": '', \"tableNumber\": this.props.tableNumber, \"orderStatus\": '',\n            \"transTime\": new Date().toLocaleString(), \"seatTaken\": 0,*/})\n              })\n        }\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n    }\n\n    AddCustomClick(e, data){\n        this.state.orderList.map(item => {\n            if (item.name == this.state.currentSelected ){\n                item.custom = item.custom.concat(data[0]);\n                if(data[1] != 0){\n                    let additionalPrice = item.price/item.quantity - item.originalPrice + data[1];\n                    item.price = (item.originalPrice + additionalPrice) * item.quantity;\n                }\n            }\n    })\n    setTimeout(function() { \n        this.setState({\n            addedList: this.state.orderList,\n            totalPrice: 0,\n        })\n        this.state.addedList.map(item => (\n            this.setState({\n                totalPrice: this.state.totalPrice + item.price,\n            })\n        ))\n    }.bind(this), 100)\n    }\n\n    CustomClick(data, e){\n        this.setState({\n            currentSelected: data,\n        })\n     }\n    \n      MinusClick(data, e){\n        this.state.orderList.map(item => {\n            if (item.name == data){\n                item.quantity = item.quantity - 1;\n                let additionalPrice = item.price/(item.quantity+1) - item.originalPrice;\n                if(item.quantity < 1){\n                    item.quantity = 1;\n                    additionalPrice = item.price/(item.quantity) - item.originalPrice;\n                }\n                item.price = (item.originalPrice + additionalPrice) * item.quantity;\n            }\n        })\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n    }\n\n    PlusClick(data, e){\n        this.state.orderList.map(item => {\n            if (item.name == data){\n                item.quantity = item.quantity + 1;\n                let additionalPrice = item.price/(item.quantity-1) - item.originalPrice;\n                item.price = (item.originalPrice + additionalPrice) * item.quantity;\n            }\n        })\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n  }\n    DeleteClick(data, e){\n    var confirmation = window.confirm('你要刪除此項目嗎?');\n    if(confirmation === true){  \n        this.setState({\n            orderList: this.state.orderList.filter (todo => {  \n                return todo.name !== data;\n              })\n        })\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n    }\n}\n\nDeleteCustomClick(data, e){\n    let additionalPrice = 0, deduct = 0;\n    var confirmation = window.confirm('你要刪除此配料嗎?');\n    if(confirmation === true){  \n        this.state.orderList.map(item => {\n            if (item.name == this.state.currentSelected ){\n                item.custom = item.custom.filter(todo => {\n                    // if(todo === \"冰底\" || todo === \"外賣\" || todo ===  \"分盒\")  //more to add\n                    //     deduct = 1;\n                    // else if(todo === \"飯\" || todo === \"泡飯\")\n                    //     deduct = 5;\n                    // else if(todo == \"加底\")\n                    //     deduct = 8;\n                    // else if(todo == \"學生優惠\")\n                    //     deduct = -5;\n                    additionalPrice = item.price/item.quantity - item.originalPrice - deduct;\n                    item.price = (item.originalPrice + additionalPrice) * item.quantity;\n                    return todo !== data;\n                })\n            }\n    })\n        setTimeout(function() { \n            this.setState({\n                addedList: this.state.orderList,\n                totalPrice: 0,\n            })\n            this.state.addedList.map(item => (\n                this.setState({\n                    totalPrice: this.state.totalPrice + item.price,\n                })\n            ))\n        }.bind(this), 100)\n    }\n}\n  \n    PlaceOrderClick(data, e){\n        e.preventDefault(e);\n        if(this.state.totalPrice){\n            this.state.addedList.map(item => {\n                item.totalPrice = this.state.totalPrice\n                this.setState({\n                    // currentTime: new Date().toLocaleString(),\n                    // orderStatus: 'proceeding',\n                    neworder: [{\"totalPrice\": this.state.addedList[0].totalPrice, \"tableNumber\": this.props.tableNumber, \"orderStatus\": 'proceeding',\n                    \"transTime\": new Date().toLocaleString(), \"seatTaken\": 0, \"productlist\": this.state.addedList}],\n                })\n            })\n            this.props.PlaceOrderClick(e.target.value, neworder);\n        }\n    }\n\n    // sizes = [ \"X-Small\", \"Small\", \"Medium\", \"Large\", \"X-Large\", \"2X-Large\" ];\n\n    render(){\n        // const added = React.Children.toArray(this.props.addedList, (child) => {\n        //     return React.cloneElement(child);\n        //   });\n        //   const added = this.props.addedList.map(Child => <div>{Child}</div> )\n        // React.Children.forEach(this.props.children, function(){ //independent callback\n        //     console.log(this);  //now it`s obj :)\n        // }, obj);\n    //     const added = (props) =>\n    //     props.addedList.map((item,index)=> \n    // <div key={index}>{item.name}</div>\n    //    );\n        let totalPrice = 0;\n        this.state.addedList.map(item => (\n            totalPrice = totalPrice + item.price\n        ))\n\n        return(\n        <Router>\n            <div class=\"menu_page\">\n                <div class=\"menu_category\" style={{top: this.state.heightSet}}>\n                    {/* <h2>類別</h2> */}\n                    <ul>\n                        <li>Table {this.props.tableNumber}</li>\n                        <Link to=\"/food\" style={{ textDecoration: 'none' }}><li>套餐</li></Link>\n                        {/* <li><Link to=\"/menu/specialFood\" style={{ textDecoration: 'none' }}>特餐</Link></li> */}\n                        <Link to=\"/individualFood\" style={{ textDecoration: 'none' }}><li>單點</li></Link>\n                        <Link to=\"/drink\" class=\"menu_link\" style={{ textDecoration: 'none' }}><li>飲品</li></Link>\n                        <Link to=\"/hotpot\" style={{ textDecoration: 'none' }}><li>火鍋配料</li></Link>\n                        <Link to=\"/other\" style={{ textDecoration: 'none' }}><li>其他</li></Link>\n                    </ul>\n                </div>\n                <Switch>\n                    <Route path=\"/food\">\n                        <Food AddFoodClick = {this.AddFoodClick} AddCustomClick = {this.AddCustomClick}/>\n                    </Route>\n                    {/* <Route path=\"/menu/specialFood\">\n                        <SpecialFood />\n                    </Route> */}\n                    <Route path=\"/individualFood\">\n                        <IndividualFood AddFoodClick = {this.AddFoodClick} AddCustomClick = {this.AddCustomClick}/>\n                    </Route>\n                    <Route path=\"/drink\">\n                        <Drink AddFoodClick = {this.AddFoodClick} AddCustomClick = {this.AddCustomClick}/>\n                    </Route>\n                    <Route path=\"/hotpot\" /*component={Hotpot}*/ >\n                        <Hotpot AddFoodClick = {this.AddFoodClick}/>\n                    </Route>\n                    <Route path=\"/other\">\n                        <Other AddFoodClick = {this.AddFoodClick}/>\n                    </Route>\n                </Switch>\n\n                <div class=\"added_item\">\n                <div class=\"items_name\"><p>已選擇訂單:</p></div>\n                    {this.state.addedList.map(item => (\n                        <div class=\"items_added_add\" onClick={this.CustomClick.bind(this, item.name)}>\n                            <div class=\"fas fa-times-circle close_btn\" onClick={this.DeleteClick.bind(this, item.name)}></div>\n                            <div key={item} /*contenteditable=\"true\"*/>{item.name}</div>\n                            <div key={item}>${item.price}</div>\n                            <div key={item}><span class=\"edit_btn\" onClick={this.MinusClick.bind(this, item.name)}>-</span> {item.quantity} <span class=\"edit_btn\" onClick={this.PlusClick.bind(this, item.name)}>+</span></div>\n                        \n                            {item.custom.map(items => (\n                                <div key={items} class=\"del_btn\" onClick={this.DeleteCustomClick.bind(this, items)}>{items}</div>\n                            ))}\n                        </div>\n                    ))}\n                </div>\n\n                <div class=\"added_item\">\n                    <div class=\"items_name_num\"><p>人數：{this.state.seatTaken}</p></div>\n                    <Select options={Numbers} placeholder=\"人數\" className=\"dropdown\"/>\n                    <div class=\"items_name\"><p>總計: $ {this.state.totalPrice}</p></div>\n                    <div class=\"items_name\"><p>時間: {this.state.currentTime}</p></div>\n                    \n                </div>\n                \n\n                <div class=\"pay_bottom\">\n                    <ul>\n                        <li onClick={this.BackTableClick.bind(this, \"1\")}><a>&lt; 返回</a></li>\n                        <li id=\"placeorder_btn\" onClick={this.PlaceOrderClick.bind(this, this.state.addedList)}><a>落單 &gt;</a></li>\n                        {/* <li id=\"placeorder_btn\" onClick={(event)=>this.PlaceOrderClick(event, this.state.added)}><a>落單 &gt;</a></li> */}\n                    </ul>\n                 </div>\n            </div>\n        </Router>\n        );\n    }\n}\n\n\nexport default Menu;"]},"metadata":{},"sourceType":"module"}