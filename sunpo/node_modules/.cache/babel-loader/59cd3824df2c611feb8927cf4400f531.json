{"ast":null,"code":"var _jsxFileName = \"/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Try from './Try';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\"; // import Logins from \"./components/login\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoggedIn: false,\n      username: '',\n      password: '',\n      login_fail: 'WELCOME!'\n    };\n    this.usernameChange = this.usernameChange.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.LoginClick = this.LoginClick.bind(this);\n    this.LogoutClick = this.LogoutClick.bind(this);\n  }\n\n  render() {\n    const isLoggedIn = this.state.isLoggedIn;\n    let current_page, login;\n\n    if (isLoggedIn) {\n      current_page = React.createElement(MainPage, {\n        username: this.state.username,\n        login_fail: this.state.login_fail,\n        isLoggedIn: this.state.isLoggedIn,\n        LogoutClick: this.LogoutClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32\n        },\n        __self: this\n      });\n    } else {\n      current_page = React.createElement(Login, {\n        username: this.state.username,\n        password: this.state.password,\n        onUsernameChange: this.usernameChange,\n        onPasswordChange: this.passwordChange,\n        LoginClick: this.LoginClick,\n        login_fail: this.state.login_fail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, current_page);\n  }\n\n  usernameChange(name) {\n    this.setState({\n      username: name\n    });\n  }\n\n  passwordChange(pass) {\n    this.setState({\n      password: pass\n    });\n  }\n\n  componentDidMount() {\n    if (localStorage.loggin === 'true') {\n      this.handlePageRefresh(localStorage.usrname, localStorage.password);\n    }\n  }\n\n  handlePageRefresh(usrname, password) {\n    var url = \"http://localhost:3001/login\";\n    var user = {\n      'username': usrname,\n      'password': password\n    };\n    $.ajax({\n      url: url,\n      method: \"POST\",\n      data: user,\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (data) {\n        if (data.message === \"Login Success!\") {\n          // this.props.SuccessLogin(data.login_usr, data.data);\n          this.setState({\n            isLoggedIn: true,\n            login_fail: 'WELCOME!'\n          });\n        } else {\n          this.setState({\n            username: '',\n            password: '',\n            isLoggedIn: false // login_fail: 'LOGIN FAILURE!',\n\n          });\n        }\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n  LoginClick(e) {\n    if (this.state.username === '' || this.state.password === '') {\n      // alert('Please fill in all fields');\n      this.setState({\n        login_fail: 'PLEASE FILL IN ALL FIELDS!'\n      });\n    } else {\n      localStorage.setItem('usrname', this.state.username);\n      localStorage.setItem('password', this.state.password);\n      var loginInfo = {\n        \"username\": this.state.username,\n        \"password\": this.state.password\n      };\n      $.ajax({\n        url: \"http://localhost:3001/login\",\n        type: 'POST',\n        data: loginInfo,\n        xhrFields: {\n          withCredentials: true\n        },\n        // dataType: 'JSON',\n        success: function (data) {\n          if (data.message === \"Login Success!\") {\n            localStorage.setItem('loggin', 'true'); // this.props.SuccessLogin(data.login_usr, data.data);\n\n            this.setState({\n              isLoggedIn: true,\n              login_fail: 'WELCOME!'\n            });\n          } else {\n            this.setState({\n              username: '',\n              password: '',\n              isLoggedIn: false,\n              login_fail: \"LOGIN FAILURE\"\n            });\n          }\n        }.bind(this),\n        error: function (xhr, ajaxOptions, thrownError) {\n          alert(xhr.status);\n          alert(thrownError);\n        }\n      });\n    }\n\n    e.preventDefault(e);\n  }\n\n  LogoutClick() {\n    $.ajax({\n      url: \"http://localhost:3001/logout\",\n      method: \"GET\",\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (data) {\n        // clear stored user state after logout\n        localStorage.setItem('loggin', 'false');\n        localStorage.setItem('usrname', '');\n        localStorage.setItem('password', ''); // clear timer\n        // clearInterval(this.timerID);\n\n        this.setState({\n          isLoggedIn: false,\n          login_fail: \"YOU HAVE SUCCESSFULLY LOGOUT!\"\n        });\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n}\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.usernameChange = this.usernameChange.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.LoginClick = this.LoginClick.bind(this); //  this.textInput = null;\n  }\n\n  usernameChange(e) {\n    e.preventDefault(e);\n    this.props.onUsernameChange(e.target.value);\n  }\n\n  passwordChange(e) {\n    e.preventDefault(e);\n    this.props.onPasswordChange(e.target.value);\n  }\n\n  LoginClick(e) {\n    e.preventDefault(e);\n    this.props.LoginClick(e);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"logo_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"SUN PO\"), React.createElement(\"form\", {\n      class: \"login_form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"p\", {\n      id: \"error_message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \" \", this.props.login_fail, \" \"), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Enter username\",\n      value: this.props.username,\n      onChange: this.usernameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"Enter password\",\n      value: this.props.password,\n      onChange: this.passwordChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary btn-block\",\n      onClick: this.LoginClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n}\n\nclass MainPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.LogoutClick = this.LogoutClick.bind(this);\n  }\n\n  LogoutClick(e) {\n    e.preventDefault(e);\n    this.props.LogoutClick(e);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"logo_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, \"SUN PO\"), React.createElement(Try, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"inline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      class: \"inline\",\n      id: \"name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, this.props.username)), React.createElement(\"button\", {\n      id: \"logout\",\n      onClick: this.LogoutClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, \"Log out\")), React.createElement(\"p\", {\n      class: \"col-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, \"Starred Friend List: \"));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/App.js"],"names":["React","Try","$","BrowserRouter","Router","Switch","Route","Link","App","Component","constructor","props","state","isLoggedIn","username","password","login_fail","usernameChange","bind","passwordChange","LoginClick","LogoutClick","render","current_page","login","name","setState","pass","componentDidMount","localStorage","loggin","handlePageRefresh","usrname","url","user","ajax","method","data","xhrFields","withCredentials","success","message","error","xhr","ajaxOptions","thrownError","alert","status","e","setItem","loginInfo","type","preventDefault","Login","onUsernameChange","target","value","onPasswordChange","MainPage"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport Try from './Try';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\n// import Logins from \"./components/login\";\n\nclass App extends React.Component{\n  constructor(props) {\n    super(props);\n    \n    this.state = {\n      isLoggedIn: false,\n      username: '',\n      password: '',\n      login_fail: 'WELCOME!',\n    };\n    this.usernameChange = this.usernameChange.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.LoginClick = this.LoginClick.bind(this);\n    this.LogoutClick = this.LogoutClick.bind(this);\n  }\n\n  render(){\n    const isLoggedIn = this.state.isLoggedIn;\n    let current_page, login;\n\n    if (isLoggedIn) {\n      current_page = <MainPage\n      username={this.state.username}\n      login_fail={this.state.login_fail}\n      isLoggedIn={this.state.isLoggedIn}\n      LogoutClick={this.LogoutClick}\n      />;\n    }\n    else{\n      current_page = <Login\n      username={this.state.username}\n      password={this.state.password}\n      onUsernameChange={this.usernameChange}\n      onPasswordChange={this.passwordChange}\n      LoginClick={this.LoginClick}\n      login_fail={this.state.login_fail}\n      />;\n      \n    }\n  \n    return (\n     <div className=\"App\">\n       {current_page}\n      </div>\n     \n    );\n  }\n\n  usernameChange(name) {\n    this.setState({\n      username: name\n    })\n  }\n  \n  passwordChange(pass) {\n    this.setState({\n      password: pass\n    })\n  }\n\n  componentDidMount(){\n    if(localStorage.loggin === 'true'){\n      this.handlePageRefresh(localStorage.usrname, localStorage.password);\n    }\n  }\n\n  handlePageRefresh(usrname, password){\n    var url = \"http://localhost:3001/login\";\n    var user = {'username': usrname, 'password': password};\n    $.ajax({\n      url: url,\n      method: \"POST\",\n      data: user,\n      xhrFields: {\n        withCredentials: true\n      },\n      success:function(data){\n        if (data.message === \"Login Success!\"){\n          // this.props.SuccessLogin(data.login_usr, data.data);\n          this.setState({\n            isLoggedIn: true,\n            login_fail: 'WELCOME!',\n          })\n        } else{\n          this.setState({\n            username: '',\n            password: '',\n            isLoggedIn: false,\n            // login_fail: 'LOGIN FAILURE!',\n          })\n        }\n      }.bind(this),\n      error:function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n  LoginClick(e) {\n    if (this.state.username === '' || this.state.password === '') { \n      // alert('Please fill in all fields');\n      this.setState({\n        login_fail: 'PLEASE FILL IN ALL FIELDS!',\n      });\n    }\n    else{\n      localStorage.setItem('usrname', this.state.username);\n      localStorage.setItem('password', this.state.password);\n\n      var loginInfo = {\n        \"username\" : this.state.username,\n        \"password\" : this.state.password,\n      }\n\n      $.ajax({\n        url: \"http://localhost:3001/login\",\n        type: 'POST',\n        data: loginInfo,\n        xhrFields: { withCredentials: true },\n        // dataType: 'JSON',\n        success: function(data) {\n          if (data.message === \"Login Success!\"){\n            localStorage.setItem('loggin','true');\n            // this.props.SuccessLogin(data.login_usr, data.data);\n            this.setState({\n              isLoggedIn: true,\n              login_fail: 'WELCOME!',\n            });\n          } else{\n            this.setState({\n              username: '',\n              password: '',\n              isLoggedIn: false,\n              login_fail: \"LOGIN FAILURE\"\n            });\n          }\n        }.bind(this), \n          error: function (xhr, ajaxOptions, thrownError) {\n            alert(xhr.status);\n            alert(thrownError);\n          }\n      });\n      \n  }\n\n  e.preventDefault(e);\n  }\n\n  LogoutClick(){\n    $.ajax({\n      url:\"http://localhost:3001/logout\",\n      method:\"GET\",\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function(data){\n        // clear stored user state after logout\n        localStorage.setItem('loggin','false');\n        localStorage.setItem('usrname','');\n        localStorage.setItem('password','');\n        // clear timer\n        // clearInterval(this.timerID);\n        this.setState({\n          isLoggedIn: false,\n          login_fail: \"YOU HAVE SUCCESSFULLY LOGOUT!\",\n        });\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n}\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n   this.usernameChange = this.usernameChange.bind(this);\n   this.passwordChange = this.passwordChange.bind(this);\n   this.LoginClick = this.LoginClick.bind(this);\n  //  this.textInput = null;\n\n }\n\n  usernameChange(e) {\n    e.preventDefault(e);\n    this.props.onUsernameChange(e.target.value);\n  }\n  \n  passwordChange(e) {\n    e.preventDefault(e);\n    this.props.onPasswordChange(e.target.value);\n  }\n\n  LoginClick(e) {\n    e.preventDefault(e);\n    this.props.LoginClick(e);\n  }\n\n  render() {\n      return (\n        <div >\n          <div id=\"logo_title\">SUN PO</div>\n          <form class=\"login_form\">\n              <h3>Login</h3>\n\n              <p id=\"error_message\"> {this.props.login_fail} </p>\n\n              <div className=\"form-group\">\n                  <label>Username</label>\n                  <input type=\"text\" className=\"form-control\" placeholder=\"Enter username\" value={this.props.username}\n                  onChange={this.usernameChange}/>\n              </div>\n\n              <div className=\"form-group\">\n                  <label>Password</label>\n                  <input type=\"password\" className=\"form-control\" placeholder=\"Enter password\" value={this.props.password}\n                  onChange={this.passwordChange}/>\n              </div>\n\n              <button type=\"button\" className=\"btn btn-primary btn-block\" onClick={this.LoginClick}>Submit</button>\n            </form>\n          </div>\n      );\n  }\n}\n\nclass MainPage extends React.Component{\n  constructor(props) {\n    super(props);\n\n    this.LogoutClick = this.LogoutClick.bind(this);\n }\n\n LogoutClick(e) {\n  e.preventDefault(e);\n  this.props.LogoutClick(e);\n}\n\n  render() {\n\n    return (\n      <div>\n        <div id=\"logo_title\">SUN PO</div>\n         <Try />\n        <div id=\"top\">\n          <div class=\"inline\" >\n              {/* <img class=\"inline\" src='MyApp/public/{this.props.icon}' height=\"50\" width=\"50\"/>  */}\n              <p class=\"inline\" id=\"name\">{this.props.username}</p>\n          </div>\n          <button id=\"logout\" onClick={this.LogoutClick}>Log out</button>\n        </div>\n\n        <p class=\"col-left\">Starred Friend List: </p>\n        \n       \n    </div>\n   \n    );\n  }\n}\n\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}