{"ast":null,"code":"var _jsxFileName = \"/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/Table.js\";\nimport React from 'react';\nimport Menu from './Menu';\nimport Bills from './Bills';\nimport { BrowserRouter as Router, Switch, Route, Link, Redirect } from \"react-router-dom\";\nimport $ from 'jquery';\nimport { timingSafeEqual } from 'crypto';\n\nclass TableList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transinfo: [],\n      bills: '',\n      tableinfo: [{\n        'tableNumber': '1',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '2',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '3',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '4',\n        'seatTaken': 0,\n        'maxCap': 6,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '5',\n        'seatTaken': 0,\n        'maxCap': 6,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '6',\n        'seatTaken': 0,\n        'maxCap': 6,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '7',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '8',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '9',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }, {\n        'tableNumber': '10',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': '',\n        'transaction': []\n      }]\n    };\n    this.OrderTableClick = this.OrderTableClick.bind(this);\n  }\n\n  componentDidMount() {\n    //get transaction\n    $.ajax({\n      url: \"http://localhost:3001/gettransaction\",\n      method: \"GET\",\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (datas) {\n        if (datas.message === \"Login Success!\") {\n          alert(\"success\");\n        } // alert(datas.tran[0].products[0].name+\" \"+datas.tran[0].products[0].price+\" \"+datas.tran[0].products[0].originalPrice+\" \"+\n        // datas.tran[0].products[0].quantity+\" \"+datas.tran[0].products[0].custom[0]+\" \"+datas.tran[0].totalPrice+' '+\n        // datas.tran[0].tranId+\" \"+datas.tran[0].tableNumber+\" \"+datas.tran[0].transTime+\" \"+datas.tran[0].orderStatus+\" \"+datas.tran[0].seatTaken);\n\n\n        for (var i in datas.tran) {\n          if (datas.tran[i].orderStatus == \"proceeding\") {\n            this.setState({\n              transinfo: this.state.transinfo.concat({\n                \"tranId\": datas.tran[i].tranId,\n                \"userId\": datas.tran[i].userId,\n                \"products\": datas.tran[i].products,\n                \"totalPrice\": datas.tran[i].totalPrice,\n                \"tableNumber\": datas.tran[i].tableNumber,\n                \"orderStatus\": datas.tran[i].orderStatus,\n                \"transTime\": datas.tran[i].transTime,\n                \"seatTaken\": datas.tran[i].seatTaken\n              })\n            });\n          }\n        }\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n    setTimeout(function () {\n      // this.state.transinfo[0].products.map((tran, index) => {\n      //     alert(tran.name+' '+tran.custom[0]);\n      // })\n      this.state.tableinfo.map((table, index) => {\n        this.state.transinfo.map((tran, i) => {\n          if (tran.tableNumber === table.tableNumber) {\n            let items = [...this.state.tableinfo];\n            let item = { ...items[index]\n            };\n            item.seatTaken = item.seatTaken + tran.seatTaken;\n            item.transaction = item.transaction.concat(tran.tranId);\n            items[index] = item;\n            this.setState({\n              tableinfo: items\n            });\n          }\n        });\n      });\n      this.state.tableinfo.map((table, index) => {\n        if (table.maxCap <= table.seatTaken) {\n          // alert(\"maxcap: \"+table.maxCap+\" seatTaken: \"+table.seatTaken);\n          let items = [...this.state.tableinfo];\n          let item = { ...items[index]\n          };\n          item.isFull = true;\n          items[index] = item;\n          this.setState({\n            tableinfo: items\n          });\n        }\n      });\n      this.state.tableinfo.map((table, index) => {\n        let items = [...this.state.tableinfo];\n        let item = { ...items[index]\n        };\n\n        if (table.isFull === true) {\n          item.tableColor = 'red';\n        } else if (table.isFull !== true && table.seatTaken > 0) {\n          item.tableColor = 'orange';\n        } else {\n          item.tableColor = 'palegreen';\n        }\n\n        items[index] = item;\n        this.setState({\n          tableinfo: items\n        }); // alert(table.tableNumber+' '+table.tableColor);\n\n        if (table.transaction && table.transaction.length > 0) {// alert(\"Table \"+table.tableNumber + \" has transaction\");\n          // alert(table.transaction[0]);\n        }\n      });\n    }.bind(this), 100);\n  }\n\n  TableClick(data, e) {\n    let which_function;\n\n    if (this.props.payBills === '結賬') {\n      which_function = \"2\" + data;\n    } else {\n      which_function = \"1\" + data;\n    }\n\n    if (!this.state.tableinfo[parseInt(data) - 1].isFull) {\n      this.props.TableClick(e.target.value, which_function);\n    }\n  }\n\n  OrderTableClick(data, e) {\n    if (this.props.payBills === '結賬') {\n      this.setState({\n        bills: React.createElement(Bills, {\n          transinfo: this.state.transinfo,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        })\n      });\n    }\n  } // TClick = (e, data) => {\n  //     alert('Clicked Table ' + e);\n  // } \n\n\n  render() {\n    let current, functions;\n    functions = React.createElement(\"h3\", {\n      className: \"table_title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, this.props.payBills);\n    if (this.state.bills !== '') current = null;else {\n      current = React.createElement(\"div\", {\n        class: \"table_page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"tables_background\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"table_column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[9].tableColor\n        },\n        id: \"table_10\",\n        class: \"rectangle tables\",\n        onClick: this.TableClick.bind(this, \"10\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Table 10\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[9].seatTaken, \"/\", this.state.tableinfo[9].maxCap), this.state.tableinfo[9].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        onClick: this.OrderTableClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1)))), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[8].tableColor\n        },\n        id: \"table_9\",\n        class: \"rectangle tables\",\n        onClick: this.TableClick.bind(this, \"9\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Table 9\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[8].seatTaken, \"/\", this.state.tableinfo[8].maxCap), this.state.tableinfo[8].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        onClick: this.OrderTableClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1)))), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[7].tableColor\n        },\n        id: \"table_8\",\n        class: \"rectangle tables\",\n        onClick: this.TableClick.bind(this, \"8\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Table 8\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[7].seatTaken, \"/\", this.state.tableinfo[7].maxCap), this.state.tableinfo[7].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        onClick: this.OrderTableClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1)))), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[6].tableColor\n        },\n        id: \"table_7\",\n        class: \"rectangle tables\",\n        onClick: this.TableClick.bind(this, \"7\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Table 7\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[6].seatTaken, \"/\", this.state.tableinfo[6].maxCap), this.state.tableinfo[6].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        onClick: this.orderTableClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1))))), React.createElement(\"div\", {\n        class: \"table_column table_col2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"rectangle2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[5].tableColor\n        },\n        id: \"table_6\",\n        class: \"circle tables\",\n        onClick: this.TableClick.bind(this, \"6\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Table 6\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[5].seatTaken, \"/\", this.state.tableinfo[5].maxCap), this.state.tableinfo[5].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1)))), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[4].tableColor\n        },\n        id: \"table_5\",\n        class: \"circle tables\",\n        onClick: this.TableClick.bind(this, \"5\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Table 5\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[4].seatTaken, \"/\", this.state.tableinfo[4].maxCap), this.state.tableinfo[4].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1)))), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[3].tableColor\n        },\n        id: \"table_4\",\n        class: \"circle tables\",\n        onClick: this.TableClick.bind(this, \"4\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Table 4\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[3].seatTaken, \"/\", this.state.tableinfo[3].maxCap), this.state.tableinfo[3].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1))))), React.createElement(\"div\", {\n        class: \"table_column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"rectangle2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[2].tableColor\n        },\n        id: \"table_3\",\n        class: \"rectangle tables\",\n        onClick: this.TableClick.bind(this, \"3\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, \"Table 3\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[2].seatTaken, \"/\", this.state.tableinfo[2].maxCap), this.state.tableinfo[2].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1)))), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[1].tableColor\n        },\n        id: \"table_2\",\n        class: \"rectangle tables\",\n        onClick: this.TableClick.bind(this, \"2\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"Table 2\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[1].seatTaken, \"/\", this.state.tableinfo[1].maxCap), this.state.tableinfo[1].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1)))), React.createElement(\"div\", {\n        style: {\n          backgroundColor: this.state.tableinfo[0].tableColor\n        },\n        id: \"table_1\",\n        class: \"rectangle tables\",\n        onClick: this.TableClick.bind(this, \"1\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, \"Table 1\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"\\u4F7F\\u7528\\u7387: \", this.state.tableinfo[0].seatTaken, \"/\", this.state.tableinfo[0].maxCap), this.state.tableinfo[0].transaction.map((item, index) => React.createElement(\"li\", {\n        class: \"hover_background\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, \"\\u8A02\\u55AE \", index + 1)))))));\n    }\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, functions, current, this.state.bills);\n  }\n\n}\n\nexport default TableList;","map":{"version":3,"sources":["/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/Table.js"],"names":["React","Menu","Bills","BrowserRouter","Router","Switch","Route","Link","Redirect","$","timingSafeEqual","TableList","Component","constructor","props","state","transinfo","bills","tableinfo","OrderTableClick","bind","componentDidMount","ajax","url","method","xhrFields","withCredentials","success","datas","message","alert","i","tran","orderStatus","setState","concat","tranId","userId","products","totalPrice","tableNumber","transTime","seatTaken","error","xhr","ajaxOptions","thrownError","status","setTimeout","map","table","index","items","item","transaction","maxCap","isFull","tableColor","length","TableClick","data","e","which_function","payBills","parseInt","target","value","render","current","functions","backgroundColor","orderTableClick"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Menu from './Menu';\nimport Bills from './Bills';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    Redirect,\n  } from \"react-router-dom\";\n\nimport $ from 'jquery';\nimport { timingSafeEqual } from 'crypto';\n\n\nclass TableList extends React.Component{\n    constructor(props) {\n      super(props);\n    \n      this.state = {\n        transinfo: [],\n        bills: '',\n        tableinfo: [{'tableNumber': '1','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': '', 'transaction':[]}, \n      {'tableNumber': '2','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': '', 'transaction': []},\n      {'tableNumber': '3','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': '', 'transaction': []}, \n      {'tableNumber': '4','seatTaken': 0, 'maxCap': 6, 'isFull': false, 'tableColor': '', 'transaction': []}, \n      {'tableNumber': '5','seatTaken': 0, 'maxCap': 6, 'isFull': false, 'tableColor': '', 'transaction': []},\n      {'tableNumber': '6','seatTaken': 0, 'maxCap': 6, 'isFull': false, 'tableColor': '', 'transaction': []}, \n      {'tableNumber': '7','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': '', 'transaction': []}, \n      {'tableNumber': '8','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': '', 'transaction': []},\n      {'tableNumber': '9','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': '', 'transaction': []}, \n      {'tableNumber': '10','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': '', 'transaction':[]}],\n      };\n\n      this.OrderTableClick = this.OrderTableClick.bind(this);\n    }\n\n    componentDidMount(){\n\n        //get transaction\n        $.ajax({\n            url:\"http://localhost:3001/gettransaction\",\n            method:\"GET\",\n            xhrFields: {\n              withCredentials: true\n            },\n            success: function(datas){\n                if (datas.message === \"Login Success!\"){\n                    alert(\"success\");\n                }\n                // alert(datas.tran[0].products[0].name+\" \"+datas.tran[0].products[0].price+\" \"+datas.tran[0].products[0].originalPrice+\" \"+\n                // datas.tran[0].products[0].quantity+\" \"+datas.tran[0].products[0].custom[0]+\" \"+datas.tran[0].totalPrice+' '+\n                // datas.tran[0].tranId+\" \"+datas.tran[0].tableNumber+\" \"+datas.tran[0].transTime+\" \"+datas.tran[0].orderStatus+\" \"+datas.tran[0].seatTaken);\n                for (var i in datas.tran){\n                    if(datas.tran[i].orderStatus == \"proceeding\"){\n                    this.setState({\n                        transinfo: this.state.transinfo.concat({\"tranId\": datas.tran[i].tranId, \"userId\": datas.tran[i].userId, \"products\": datas.tran[i].products, \n                        \"totalPrice\": datas.tran[i].totalPrice, \"tableNumber\": datas.tran[i].tableNumber, \n                        \"orderStatus\": datas.tran[i].orderStatus, \"transTime\": datas.tran[i].transTime, \"seatTaken\": datas.tran[i].seatTaken,}),\n                      });\n                    }\n                }\n            }.bind(this),\n            error: function (xhr, ajaxOptions, thrownError) {\n              alert(xhr.status);\n              alert(thrownError);\n            }\n          });\n        \n        setTimeout(function() { \n            // this.state.transinfo[0].products.map((tran, index) => {\n            //     alert(tran.name+' '+tran.custom[0]);\n            // })\n\n            this.state.tableinfo.map((table, index) => {\n                this.state.transinfo.map((tran, i) => {\n                    if(tran.tableNumber === table.tableNumber){\n                        let items = [...this.state.tableinfo];\n                        let item = {...items[index]};\n                        item.seatTaken = item.seatTaken + tran.seatTaken;\n                        item.transaction = item.transaction.concat(tran.tranId);\n                        items[index] = item;\n                        this.setState({tableinfo: items});\n                    }\n                })\n            })\n\n            this.state.tableinfo.map((table, index) => {\n\n                if(table.maxCap <= table.seatTaken){\n                    // alert(\"maxcap: \"+table.maxCap+\" seatTaken: \"+table.seatTaken);\n                    let items = [...this.state.tableinfo];\n                    let item = {...items[index]};\n                    item.isFull = true;\n                    items[index] = item;\n                    this.setState({tableinfo: items});\n                }\n            })\n            \n            this.state.tableinfo.map((table, index) => {\n                let items = [...this.state.tableinfo];\n                let item = {...items[index]};\n                if(table.isFull === true){\n                    item.tableColor = 'red';\n                }\n                else if(table.isFull !== true && table.seatTaken > 0){\n                    item.tableColor = 'orange';\n                }\n                else{\n                    item.tableColor = 'palegreen';\n                }\n                items[index] = item;\n                this.setState({tableinfo: items});\n                // alert(table.tableNumber+' '+table.tableColor);\n\n\n                if(table.transaction && table.transaction.length > 0){\n                    // alert(\"Table \"+table.tableNumber + \" has transaction\");\n                    // alert(table.transaction[0]);\n                }\n            }\n                \n            )\n        }.bind(this), 100)\n    }\n\n    TableClick(data, e){\n        let which_function;\n        if(this.props.payBills === '結賬'){\n            which_function = \"2\" + data;\n        }\n        else{\n            which_function = \"1\" + data;\n        }\n\n        if(!this.state.tableinfo[parseInt(data)-1].isFull){\n            this.props.TableClick(e.target.value, which_function);\n        }\n           \n    }     \n\n    OrderTableClick(data, e){\n        if(this.props.payBills === '結賬'){\n            this.setState({\n                bills: <Bills transinfo={this.state.transinfo}/>\n            })\n        }\n       \n    }     \n\n    // TClick = (e, data) => {\n    //     alert('Clicked Table ' + e);\n    // } \n\n\n    render(){\n        let current, functions;\n    functions = <h3 className=\"table_title\" >{this.props.payBills}</h3>\n    if(this.state.bills !== '')\n        current = null;\n      else{  current = \n        <div class=\"table_page\">\n                <div class=\"tables_background\">\n            <div class=\"table_column\">\n                <div style={{backgroundColor: this.state.tableinfo[9].tableColor}} id=\"table_10\" class=\"rectangle tables\" onClick={this.TableClick.bind(this, \"10\")}>\n                    <ul>\n                        <li>Table 10</li>\n                        <li>使用率: {this.state.tableinfo[9].seatTaken}/{this.state.tableinfo[9].maxCap}</li>\n                        {this.state.tableinfo[9].transaction.map((item, index) => (\n                            <li class=\"hover_background\" onClick={this.OrderTableClick}>訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                </div>\n                <div style={{backgroundColor: this.state.tableinfo[8].tableColor}} id=\"table_9\" class=\"rectangle tables\" onClick={this.TableClick.bind(this, \"9\")}>\n                    <ul>\n                        <li>Table 9</li>\n                        <li>使用率: {this.state.tableinfo[8].seatTaken}/{this.state.tableinfo[8].maxCap}</li>\n                        {this.state.tableinfo[8].transaction.map((item, index) => (\n                            <li class=\"hover_background\" onClick={this.OrderTableClick}>訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                </div>\n                <div style={{backgroundColor: this.state.tableinfo[7].tableColor}} id=\"table_8\" class=\"rectangle tables\" onClick={this.TableClick.bind(this, \"8\")}>\n                    <ul>\n                        <li>Table 8</li>\n                        <li>使用率: {this.state.tableinfo[7].seatTaken}/{this.state.tableinfo[7].maxCap}</li>\n                        {this.state.tableinfo[7].transaction.map((item, index) => (\n                            <li class=\"hover_background\" onClick={this.OrderTableClick}>訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                </div>\n                <div style={{backgroundColor: this.state.tableinfo[6].tableColor}} id=\"table_7\" class=\"rectangle tables\" onClick={this.TableClick.bind(this, \"7\")}>\n                    <ul>\n                        <li>Table 7</li>\n                        <li>使用率: {this.state.tableinfo[6].seatTaken}/{this.state.tableinfo[6].maxCap}</li>\n                        {this.state.tableinfo[6].transaction.map((item, index) => (\n                            <li class=\"hover_background\" onClick={this.orderTableClick}>訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                </div>\n            </div>\n               \n            <div class=\"table_column table_col2\">\n                <div class=\"rectangle2\" ></div>\n                <div style={{backgroundColor: this.state.tableinfo[5].tableColor}} id=\"table_6\" class=\"circle tables\" onClick={this.TableClick.bind(this, \"6\")}>\n                    <ul>\n                        <li>Table 6</li>\n                        <li>使用率: {this.state.tableinfo[5].seatTaken}/{this.state.tableinfo[5].maxCap}</li>\n                        {this.state.tableinfo[5].transaction.map((item, index) => (\n                            <li class=\"hover_background\">訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                </div>\n                <div style={{backgroundColor: this.state.tableinfo[4].tableColor}} id=\"table_5\" class=\"circle tables\" onClick={this.TableClick.bind(this, \"5\")}>\n                    <ul>\n                        <li>Table 5</li>\n                        <li>使用率: {this.state.tableinfo[4].seatTaken}/{this.state.tableinfo[4].maxCap}</li>\n                        {this.state.tableinfo[4].transaction.map((item, index) => (\n                            <li class=\"hover_background\">訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                </div>\n                <div style={{backgroundColor: this.state.tableinfo[3].tableColor}} id=\"table_4\" class=\"circle tables\" onClick={this.TableClick.bind(this, \"4\")}>\n                    <ul>\n                        <li>Table 4</li>\n                        <li>使用率: {this.state.tableinfo[3].seatTaken}/{this.state.tableinfo[3].maxCap}</li>\n                        {this.state.tableinfo[3].transaction.map((item, index) => (\n                            <li class=\"hover_background\">訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                </div>\n            </div>\n               \n            <div class=\"table_column\">\n                <div class=\"rectangle2\" ></div>\n                <div style={{backgroundColor: this.state.tableinfo[2].tableColor}} id=\"table_3\" class=\"rectangle tables\" onClick={this.TableClick.bind(this, \"3\")}>\n                    <ul>\n                        <li>Table 3</li>\n                        <li>使用率: {this.state.tableinfo[2].seatTaken}/{this.state.tableinfo[2].maxCap}</li>\n                        {this.state.tableinfo[2].transaction.map((item, index) => (\n                            <li class=\"hover_background\">訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                </div>\n                <div style={{backgroundColor: this.state.tableinfo[1].tableColor}} id=\"table_2\" class=\"rectangle tables\" onClick={this.TableClick.bind(this, \"2\")}>\n                    <ul>\n                        <li>Table 2</li>\n                        <li>使用率: {this.state.tableinfo[1].seatTaken}/{this.state.tableinfo[1].maxCap}</li>\n                        {this.state.tableinfo[1].transaction.map((item, index) => (\n                            <li class=\"hover_background\">訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                    </div>\n                <div style={{backgroundColor: this.state.tableinfo[0].tableColor}} id=\"table_1\" class=\"rectangle tables\" onClick={this.TableClick.bind(this, \"1\")}>\n                    <ul>\n                        <li>Table 1</li>\n                        <li>使用率: {this.state.tableinfo[0].seatTaken}/{this.state.tableinfo[0].maxCap}</li>\n                        {this.state.tableinfo[0].transaction.map((item, index) => (\n                            <li class=\"hover_background\">訂單 {index+1}</li>\n                        ))}\n                    </ul>\n                </div>\n                {/* <div style={{backgroundColor: 'palegreen'}} id=\"table_1\" class=\"rectangle\" onClick={(e) => this.TClick(\"1\", e)}>Table 1</div> */}\n            </div>\n        </div>\n            </div>\n      }\n        return(\n            <div>\n                {functions}\n                {current}\n                {this.state.bills}\n            </div>\n\n        );\n    }\n}\n\nexport default TableList;"]},"metadata":{},"sourceType":"module"}