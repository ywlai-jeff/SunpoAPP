{"ast":null,"code":"var _jsxFileName = \"/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/App.js\";\nimport React from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css'; // import Content from './Content';\n// import Try from './notused/Try';\n\nimport TableList from './Table';\nimport Menu from './Menu';\nimport Bills from './Bills'; // import logic from './logic';\n\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoggedIn: false,\n      userId: '',\n      username: '',\n      password: '',\n      login_fail: 'WELCOME!',\n      user_type: '',\n      active_function: '',\n      // payBills: false,\n      position: '',\n      tableinfo: [{\n        'tableNumber': '1',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }, {\n        'tableNumber': '2',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }, {\n        'tableNumber': '3',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }, {\n        'tableNumber': '4',\n        'seatTaken': 0,\n        'maxCap': 6,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }, {\n        'tableNumber': '5',\n        'seatTaken': 0,\n        'maxCap': 6,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }, {\n        'tableNumber': '6',\n        'seatTaken': 0,\n        'maxCap': 6,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }, {\n        'tableNumber': '7',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }, {\n        'tableNumber': '8',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }, {\n        'tableNumber': '9',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }, {\n        'tableNumber': '10',\n        'seatTaken': 0,\n        'maxCap': 4,\n        'isFull': false,\n        'tableColor': 'palegreen'\n      }],\n      // transactionList: [],\n      orderList: [],\n      addedList: []\n    };\n    this.usernameChange = this.usernameChange.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.LoginClick = this.LoginClick.bind(this);\n    this.LogoutClick = this.LogoutClick.bind(this);\n    this.OrderClick = this.OrderClick.bind(this);\n    this.TableClick = this.TableClick.bind(this);\n    this.AddFoodClick = this.AddFoodClick.bind(this);\n    this.AddBtnClick = this.AddBtnClick.bind(this);\n    this.PaybillsClick = this.PaybillsClick.bind(this);\n    this.ForecastClick = this.ForecastClick.bind(this);\n    this.BackTableClick = this.BackTableClick.bind(this);\n    this.PlaceOrderClick = this.PlaceOrderClick.bind(this);\n    this.PayClick = this.PayClick.bind(this);\n  }\n\n  render() {\n    const isLoggedIn = this.state.isLoggedIn;\n    let title, current_page, login_page, menu_page, tablelist, nav, bills;\n\n    if (isLoggedIn) {\n      title = '';\n      nav = React.createElement(\"div\", {\n        class: \"nav_bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        class: \"fas fa-home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \" SUN PO\"), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"fas fa-user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \" \", this.state.username)), React.createElement(\"li\", {\n        onClick: this.OrderClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        class: \"function_btn fas fa-shopping-bag\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \" \\u9EDE\\u9910\")), React.createElement(\"li\", {\n        onClick: this.PaybillsClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        class: \"function_btn fas fa-money-bill-wave\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \" \\u67E5\\u95B1/\\u7D50\\u8CEC\")), React.createElement(\"li\", {\n        onClick: this.ForecastClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        class: \"function_btn fas fa-atom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \" \\u92B7\\u91CF\\u9810\\u6E2C\")), React.createElement(\"li\", {\n        onClick: this.LogoutClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        class: \"function_btn fas fa-power-off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \" \\u767B\\u51FA\")), this.state.orderList.map(item => React.createElement(\"li\", {\n        key: item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, item)), this.state.addedList.map(item => React.createElement(\"li\", {\n        key: item,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, item))));\n      menu_page = React.createElement(Menu, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      });\n      bills = React.createElement(Bills, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }); // tablelist = <TableList\n      // TableClick = {this.TableClick}\n      //                             payBills = {false}\n      //                             tableinfo={this.state.tableinfo}/>\n\n      tablelist = React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, this.state.active_function);\n    } else {\n      title = React.createElement(\"div\", {\n        id: \"logo_title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"SUN PO\");\n      login_page = React.createElement(Login, {\n        username: this.state.username,\n        password: this.state.password // position={this.state.position}\n        ,\n        onUsernameChange: this.usernameChange,\n        onPasswordChange: this.passwordChange,\n        LoginClick: this.LoginClick,\n        login_fail: this.state.login_fail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      });\n    }\n\n    return (// <Router>\n      // <Link to=\"/login\">login</Link>\n\n      /* <Link to=\"/logout\">logout</Link> */\n      // <Link to=\"/order\">order</Link>\n      // <Link to=\"/paybills\">paybills</Link>\n      // <Link to=\"/forecast\">forecast</Link>\n      // <Link exact to=\"/\">Home</Link>\n      React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, title, nav, login_page, tablelist)\n      /* <Switch>\n                    <Route path=\"/login\">\n                    </Route>\n                    <Route path=\"/order\">\n                      <TableList \n                                    // active_function={this.state.active_Function}\n                                    TableClick = {this.TableClick}\n                                    payBills = {false}\n                                    tableinfo={this.state.tableinfo}\n                          />\n                    </Route>\n                    <Route path=\"/paybills\">\n                    </Route>\n                    <Route path=\"/forcast\">\n                    </Route>\n                    <Route exact path=\"/\">\n                    </Route>\n                </Switch>\n      </Router> */\n\n    );\n  }\n\n  usernameChange(name) {\n    this.setState({\n      username: name\n    });\n  }\n\n  passwordChange(pass) {\n    this.setState({\n      password: pass\n    });\n  }\n\n  componentDidMount() {\n    if (localStorage.loggin === 'true') {\n      this.setState({\n        isLoggedIn: true,\n        username: localStorage.usrname,\n        position: localStorage.position,\n        userId: localStorage.userId\n      });\n      this.pageRefresh(localStorage.usrname, localStorage.password);\n    } // const script = document.createElement(\"script\");\n    // // script.async = true;\n    // script.src = \"https://kit.fontawesome.com/b99e675b6e.js\";\n    // document.head.appendChild(script);\n\n  }\n\n  pageRefresh(usrname, password) {\n    var url = \"http://localhost:3001/login\";\n    var userinfo = {\n      'username': usrname,\n      'password': password\n    };\n    $.ajax({\n      url: url,\n      method: \"POST\",\n      data: userinfo,\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (data) {\n        if (data.message === \"Login Success!\") {\n          this.setState({});\n        } else {\n          this.setState({\n            userId: '',\n            username: '',\n            password: '',\n            isLoggedIn: false,\n            login_fail: \"LOGIN FAILURE\"\n          });\n        }\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n  LoginClick(e) {\n    if (this.state.username === '' || this.state.password === '') {\n      // alert('Please fill in all fields');\n      this.setState({\n        login_fail: 'PLEASE FILL IN ALL FIELDS!'\n      });\n    } else {\n      localStorage.setItem('usrname', this.state.username);\n      localStorage.setItem('password', this.state.password);\n      var loginInfo = {\n        \"username\": this.state.username,\n        \"password\": this.state.password\n      };\n      $.ajax({\n        url: \"http://localhost:3001/login\",\n        type: 'POST',\n        data: loginInfo,\n        xhrFields: {\n          withCredentials: true\n        },\n        // dataType: 'JSON',\n        success: function (data) {\n          if (data.message === \"Login Success!\") {\n            localStorage.setItem('loggin', 'true');\n            localStorage.setItem('position', data.position);\n            localStorage.setItem('userId', data.id);\n            alert(data.id);\n            this.setState({\n              isLoggedIn: true,\n              login_fail: 'WELCOME!',\n              position: data.position,\n              userId: localStorage.userId\n            });\n          } else {\n            this.setState({\n              username: '',\n              password: '',\n              isLoggedIn: false,\n              login_fail: \"LOGIN FAILURE\",\n              userId: ''\n            });\n          }\n        }.bind(this),\n        error: function (xhr, ajaxOptions, thrownError) {\n          alert(xhr.status);\n          alert(thrownError);\n        }\n      });\n    }\n\n    e.preventDefault(e);\n  }\n\n  LogoutClick() {\n    $.ajax({\n      url: \"http://localhost:3001/logout\",\n      method: \"GET\",\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function (data) {\n        // clear stored user state after logout\n        localStorage.setItem('loggin', 'false');\n        localStorage.setItem('usrname', '');\n        localStorage.setItem('password', ''); // clear timer\n        // clearInterval(this.timerID);\n\n        this.setState({\n          username: '',\n          password: '',\n          isLoggedIn: false,\n          login_fail: \"SUCCESSFULLY LOGOUT!\"\n        });\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n  OrderClick(e) {\n    this.setState({\n      // payBills: false,\n      active_function: React.createElement(TableList // active_function={this.state.active_Function}\n      , {\n        TableClick: this.TableClick,\n        payBills: false,\n        tableinfo: this.state.tableinfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      })\n    });\n  }\n\n  AddFoodClick(e, data) {\n    alert(data[0] + ' ' + data[1] + ' ' + data[2]);\n    this.setState({\n      orderList: [...this.state.orderList, ...[data[0], data[1], data[2]]]\n    }); // this.state.orderList.map((contact) => {\n    //   alert({contact});\n    // });\n  }\n\n  AddBtnClick(e, data) {\n    alert(data[0]);\n    this.setState({\n      // addedList: [...this.state.addedList, this.state.orderlist]\n      orderList: [],\n      addedList: this.state.addedList.concat(this.state.orderList)\n    });\n  }\n\n  TableClick(e, data) {\n    if (data[0] == 1) {\n      this.setState({\n        active_function: React.createElement(Menu, {\n          BackTableClick: this.BackTableClick,\n          AddFoodClick: this.AddFoodClick,\n          AddBtnClick: this.AddBtnClick,\n          PlaceOrderClick: this.PlaceOrderClick,\n          addedList: this.state.addedList,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 331\n          },\n          __self: this\n        })\n      });\n    } else if (data[0] == 2) {\n      this.setState({\n        active_function: React.createElement(Bills, {\n          BackTableClick: this.BackTableClick,\n          PayClick: this.PayClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 341\n          },\n          __self: this\n        })\n      });\n    } // alert(data);\n\n  }\n\n  PaybillsClick(e) {\n    this.setState({\n      // payBills: true,\n      active_function: React.createElement(TableList, {\n        TableClick: this.TableClick,\n        payBills: true,\n        tableinfo: this.state.tableinfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354\n        },\n        __self: this\n      }) // active_function: <Menu/>,\n\n    });\n  }\n\n  ForecastClick(e) {\n    if (this.state.position == \"manager\") {\n      this.setState({\n        active_function: ''\n      });\n    } else {\n      alert(\"Permitted Action!\");\n    }\n  }\n\n  BackTableClick(e, data) {\n    // alert(data[0]);\n    if (data[0] == 1) this.setState({\n      active_function: React.createElement(TableList, {\n        TableClick: this.TableClick,\n        payBills: false,\n        tableinfo: this.state.tableinfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379\n        },\n        __self: this\n      })\n    });else this.setState({\n      active_function: React.createElement(TableList, {\n        TableClick: this.TableClick,\n        payBills: true,\n        tableinfo: this.state.tableinfo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      })\n    });\n  }\n\n  PlaceOrderClick(e) {\n    var confirmation = window.confirm('Are you sure you want to place order?');\n\n    if (confirmation === true) {\n      this.setState({\n        active_function: ''\n      }); // send orderList to database\n    }\n  }\n\n  PayClick(e) {\n    this.setState({\n      active_function: ''\n    });\n  }\n\n}\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.usernameChange = this.usernameChange.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.LoginClick = this.LoginClick.bind(this);\n  }\n\n  usernameChange(e) {\n    e.preventDefault(e);\n    this.props.onUsernameChange(e.target.value);\n  }\n\n  passwordChange(e) {\n    e.preventDefault(e);\n    this.props.onPasswordChange(e.target.value);\n  }\n\n  LoginClick(e) {\n    e.preventDefault(e);\n    this.props.LoginClick(e);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 443\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      class: \"login_form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"p\", {\n      id: \"error_message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447\n      },\n      __self: this\n    }, \" \", this.props.login_fail, \" \"), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      placeholder: \"Enter username\",\n      value: this.props.username,\n      onChange: this.usernameChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"Enter password\",\n      value: this.props.password,\n      onChange: this.passwordChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary btn-block\",\n      onClick: this.LoginClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461\n      },\n      __self: this\n    }, \"Submit\")));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/hiuchunchan/Downloads/4601project/sun/sunpo/src/App.js"],"names":["React","TableList","Menu","Bills","$","BrowserRouter","Router","Switch","Route","Link","App","Component","constructor","props","state","isLoggedIn","userId","username","password","login_fail","user_type","active_function","position","tableinfo","orderList","addedList","usernameChange","bind","passwordChange","LoginClick","LogoutClick","OrderClick","TableClick","AddFoodClick","AddBtnClick","PaybillsClick","ForecastClick","BackTableClick","PlaceOrderClick","PayClick","render","title","current_page","login_page","menu_page","tablelist","nav","bills","map","item","name","setState","pass","componentDidMount","localStorage","loggin","usrname","pageRefresh","url","userinfo","ajax","method","data","xhrFields","withCredentials","success","message","error","xhr","ajaxOptions","thrownError","alert","status","e","setItem","loginInfo","type","id","preventDefault","concat","confirmation","window","confirm","Login","onUsernameChange","target","value","onPasswordChange"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n// import Content from './Content';\n// import Try from './notused/Try';\nimport TableList from './Table';\nimport Menu from './Menu';\nimport Bills from './Bills';\n \n\n// import logic from './logic';\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport $ from 'jquery';\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\n\nclass App extends React.Component{\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoggedIn: false,\n      userId: '',\n      username: '',\n      password: '',\n      login_fail: 'WELCOME!',\n      user_type: '',\n      active_function: '',\n      // payBills: false,\n      position: '',\n      tableinfo: [{'tableNumber': '1','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': 'palegreen'}, \n      {'tableNumber': '2','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': 'palegreen'},\n      {'tableNumber': '3','seatTaken': 0, 'maxCap': 4, 'isFull': false, 'tableColor': 'palegreen'}, \n      {'tableNumber': '4','seatTaken': 0, 'maxCap': 6, 'isFull': false, 'tableColor': 'palegreen'}, \n      {'tableNumber': '5','seatTaken': 0, 'maxCap': 6, 'isFull': false,  'tableColor': 'palegreen'},\n      {'tableNumber': '6','seatTaken': 0, 'maxCap': 6, 'isFull': false, 'tableColor': 'palegreen'}, \n      {'tableNumber': '7','seatTaken': 0, 'maxCap': 4, 'isFull': false,  'tableColor': 'palegreen'}, \n      {'tableNumber': '8','seatTaken': 0, 'maxCap': 4, 'isFull': false,  'tableColor': 'palegreen'},\n      {'tableNumber': '9','seatTaken': 0, 'maxCap': 4, 'isFull': false,  'tableColor': 'palegreen'}, \n      {'tableNumber': '10','seatTaken': 0, 'maxCap': 4, 'isFull': false,  'tableColor': 'palegreen'}],\n      // transactionList: [],\n      orderList: [],\n      addedList: [],\n    };\n    this.usernameChange = this.usernameChange.bind(this);\n    this.passwordChange = this.passwordChange.bind(this);\n    this.LoginClick = this.LoginClick.bind(this);\n    this.LogoutClick = this.LogoutClick.bind(this);\n    this.OrderClick = this.OrderClick.bind(this);\n    this.TableClick = this.TableClick.bind(this);\n    this.AddFoodClick = this.AddFoodClick.bind(this);\n    this.AddBtnClick = this.AddBtnClick.bind(this);\n    this.PaybillsClick = this.PaybillsClick.bind(this);\n    this.ForecastClick = this.ForecastClick.bind(this);\n    this.BackTableClick = this.BackTableClick.bind(this);\n    this.PlaceOrderClick = this.PlaceOrderClick.bind(this);\n    this.PayClick = this.PayClick.bind(this);\n  }\n\n\n\n  render(){\n    const isLoggedIn = this.state.isLoggedIn;\n    let title, current_page, login_page, menu_page, tablelist, nav, bills;\n\n    if (isLoggedIn) {\n      title = '';\n      nav = <div class=\"nav_bar\">\n              <h3 class=\"fas fa-home\"> SUN PO</h3>\n              <ul>\n                <li><div class=\"fas fa-user\"> {this.state.username}</div></li>\n                {/* <li tabindex=\"1\"></li> */}\n                <li onClick={this.OrderClick}><a class=\"function_btn fas fa-shopping-bag\"> 點餐</a></li>\n                <li onClick={this.PaybillsClick}><a class=\"function_btn fas fa-money-bill-wave\"> 查閱/結賬</a></li>\n                <li onClick={this.ForecastClick}><a class=\"function_btn fas fa-atom\"> 銷量預測</a></li>\n                <li onClick={this.LogoutClick}><a class=\"function_btn fas fa-power-off\"> 登出</a></li>\n                {this.state.orderList.map(item => (\n            <li key={item}>{item}</li>\n          ))}\n          {this.state.addedList.map(item => (\n            <li key={item}>{item}</li>\n          ))}\n              </ul>\n              \n              {/* <Content\n              OrderClick = {this.OrderClick}\n              PaybillsClick = {this.PaybillsClick}\n              ForecastClick = {this.ForecastClick}\n              /> */}\n              \n            </div>\n      menu_page = <Menu/>\n      bills = <Bills/>\n        // tablelist = <TableList\n        // TableClick = {this.TableClick}\n        //                             payBills = {false}\n        //                             tableinfo={this.state.tableinfo}/>\n        tablelist = <div>{this.state.active_function}</div>\n    }\n    else{\n      title = <div id=\"logo_title\">SUN PO</div>\n      login_page = <Login\n      username={this.state.username}\n      password={this.state.password}\n      // position={this.state.position}\n      onUsernameChange={this.usernameChange}\n      onPasswordChange={this.passwordChange}\n      LoginClick={this.LoginClick}\n      login_fail={this.state.login_fail}\n      />\n\n    }\n\n    return (\n      // <Router>\n        // <Link to=\"/login\">login</Link>\n        /* <Link to=\"/logout\">logout</Link> */\n        // <Link to=\"/order\">order</Link>\n        // <Link to=\"/paybills\">paybills</Link>\n        // <Link to=\"/forecast\">forecast</Link>\n        // <Link exact to=\"/\">Home</Link>\n     <div className=\"App\">\n        {title}\n        {nav}\n        {login_page}\n        {tablelist}\n        {/* {menu_page} */}\n        {/* {bills} */}\n      </div>\n\n      /* <Switch>\n                    <Route path=\"/login\">\n                    </Route>\n                    <Route path=\"/order\">\n                      <TableList \n                                    // active_function={this.state.active_Function}\n                                    TableClick = {this.TableClick}\n                                    payBills = {false}\n                                    tableinfo={this.state.tableinfo}\n                          />\n                    </Route>\n                    <Route path=\"/paybills\">\n                    </Route>\n                    <Route path=\"/forcast\">\n                    </Route>\n                    <Route exact path=\"/\">\n                    </Route>\n                </Switch>\n      </Router> */\n    );\n  }\n\n  usernameChange(name) {\n    this.setState({\n      username: name\n    })\n  }\n\n  passwordChange(pass) {\n    this.setState({\n      password: pass\n    })\n  }\n\n  componentDidMount(){\n    if(localStorage.loggin === 'true'){\n      this.setState({\n        isLoggedIn: true,\n        username: localStorage.usrname,\n        position: localStorage.position,\n        userId: localStorage.userId,\n      });\n      this.pageRefresh(localStorage.usrname, localStorage.password);\n    }\n    // const script = document.createElement(\"script\");\n    // // script.async = true;\n    // script.src = \"https://kit.fontawesome.com/b99e675b6e.js\";\n    // document.head.appendChild(script);\n  }\n\n  pageRefresh(usrname, password){\n    var url = \"http://localhost:3001/login\";\n    var userinfo = {'username': usrname, 'password': password};\n    $.ajax({\n      url: url,\n      method: \"POST\",\n      data: userinfo,\n      xhrFields: {\n        withCredentials: true\n      },\n      success:function(data){\n        if (data.message === \"Login Success!\"){\n          this.setState({\n            \n          })\n        } else{\n          this.setState({\n            userId: '',\n            username: '',\n            password: '',\n            isLoggedIn: false,\n            login_fail: \"LOGIN FAILURE\"\n          })\n        }\n      }.bind(this),\n      error:function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n  LoginClick(e) {\n    if (this.state.username === '' || this.state.password === '') {\n      // alert('Please fill in all fields');\n      this.setState({\n        login_fail: 'PLEASE FILL IN ALL FIELDS!',\n      });\n    }\n    else{\n      localStorage.setItem('usrname', this.state.username);\n      localStorage.setItem('password', this.state.password);\n\n      var loginInfo = {\n        \"username\" : this.state.username,\n        \"password\" : this.state.password,\n      }\n\n      $.ajax({\n        url: \"http://localhost:3001/login\",\n        type: 'POST',\n        data: loginInfo,\n        xhrFields: { withCredentials: true },\n        // dataType: 'JSON',\n        success: function(data) {\n          if (data.message === \"Login Success!\"){\n            localStorage.setItem('loggin','true');\n            localStorage.setItem('position',data.position);\n            localStorage.setItem('userId',data.id);\n            alert(data.id);\n\n            this.setState({\n              isLoggedIn: true,\n              login_fail: 'WELCOME!',\n              position: data.position,\n              userId: localStorage.userId,\n            });\n          } else{\n            this.setState({\n              username: '',\n              password: '',\n              isLoggedIn: false,\n              login_fail: \"LOGIN FAILURE\",\n              userId: '',\n            });\n          }\n        }.bind(this),\n          error: function (xhr, ajaxOptions, thrownError) {\n            alert(xhr.status);\n            alert(thrownError);\n          }\n      });\n\n  }\n\n  e.preventDefault(e);\n  }\n\n  LogoutClick(){\n    $.ajax({\n      url:\"http://localhost:3001/logout\",\n      method:\"GET\",\n      xhrFields: {\n        withCredentials: true\n      },\n      success: function(data){\n        // clear stored user state after logout\n        localStorage.setItem('loggin','false');\n        localStorage.setItem('usrname','');\n        localStorage.setItem('password','');\n        // clear timer\n        // clearInterval(this.timerID);\n        this.setState({\n          username: '',\n          password: '',\n          isLoggedIn: false,\n          login_fail: \"SUCCESSFULLY LOGOUT!\",\n        });\n      }.bind(this),\n      error: function (xhr, ajaxOptions, thrownError) {\n        alert(xhr.status);\n        alert(thrownError);\n      }\n    });\n  }\n\n  OrderClick(e){\n    this.setState({\n        // payBills: false,\n        active_function: <TableList \n                                    // active_function={this.state.active_Function}\n                                    TableClick = {this.TableClick}\n                                    payBills = {false}\n                                    tableinfo={this.state.tableinfo}\n                          />,\n      })\n  }\n\n  AddFoodClick(e, data){\n    alert(data[0] +' ' + data[1] +' '+ data[2]);\n    this.setState({\n        orderList: [...this.state.orderList, ...[data[0], data[1], data[2]] ]\n      })\n      // this.state.orderList.map((contact) => {\n      //   alert({contact});\n      // });\n  }\n\n  AddBtnClick(e, data){\n    alert(data[0]);\n    this.setState({\n        // addedList: [...this.state.addedList, this.state.orderlist]\n        orderList: [],\n        addedList: this.state.addedList.concat(this.state.orderList),\n      })\n  }\n\n  TableClick(e, data){\n    if(data[0] == 1){\n      this.setState({\n        active_function: <Menu BackTableClick = {this.BackTableClick}\n                              AddFoodClick = {this.AddFoodClick}\n                              AddBtnClick = {this.AddBtnClick}\n                              PlaceOrderClick = {this.PlaceOrderClick}\n                              addedList={this.state.addedList}\n        />,\n      })\n    }\n    else if (data[0] == 2){\n      this.setState({\n        active_function: <Bills BackTableClick = {this.BackTableClick}\n                                PayClick = {this.PayClick}\n                          />,\n      })\n    }\n\n    \n      // alert(data);\n  }\n\n  PaybillsClick(e){\n    this.setState({\n        // payBills: true,\n        active_function: <TableList \n                                    TableClick = {this.TableClick}\n                                    payBills = {true}\n                                    tableinfo={this.state.tableinfo}\n        \n        />,\n        // active_function: <Menu/>,\n      })\n  }\n\n  ForecastClick(e){\n    if(this.state.position == \"manager\"){\n      this.setState({\n        active_function: '',\n      })\n    }\n    else{\n      alert(\"Permitted Action!\");\n    }\n  }\n\n  BackTableClick(e, data){\n    // alert(data[0]);\n    if(data[0] == 1)\n      this.setState({\n        active_function: <TableList \n                                    TableClick = {this.TableClick}\n                                    payBills = {false}\n                                    tableinfo={this.state.tableinfo}\n\n        />,\n      })\n    else\n    this.setState({\n      active_function: <TableList \n                                  TableClick = {this.TableClick}\n                                  payBills = {true}\n                                  tableinfo={this.state.tableinfo}\n\n      />,\n    })\n  }\n\n  PlaceOrderClick(e){\n    var confirmation = window.confirm('Are you sure you want to place order?');\n    if(confirmation === true){\n      this.setState({\n        active_function: '',\n      })\n\n      // send orderList to database\n\n    }\n  }\n\n  PayClick(e){\n    this.setState({\n        active_function: '',\n      })\n  }\n\n}\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n   this.usernameChange = this.usernameChange.bind(this);\n   this.passwordChange = this.passwordChange.bind(this);\n   this.LoginClick = this.LoginClick.bind(this);\n }\n\n  usernameChange(e) {\n    e.preventDefault(e);\n    this.props.onUsernameChange(e.target.value);\n  }\n\n  passwordChange(e) {\n    e.preventDefault(e);\n    this.props.onPasswordChange(e.target.value);\n  }\n\n  LoginClick(e) {\n    e.preventDefault(e);\n    this.props.LoginClick(e);\n  }\n\n  render() {\n      return (\n        <div >\n          <form class=\"login_form\">\n              <h3>Login</h3>\n\n              <p id=\"error_message\"> {this.props.login_fail} </p>\n\n              <div className=\"form-group\">\n                  <label>Username</label>\n                  <input type=\"text\" className=\"form-control\" placeholder=\"Enter username\" value={this.props.username}\n                  onChange={this.usernameChange}/>\n              </div>\n\n              <div className=\"form-group\">\n                  <label>Password</label>\n                  <input type=\"password\" className=\"form-control\" placeholder=\"Enter password\" value={this.props.password}\n                  onChange={this.passwordChange}/>\n              </div>\n\n              <button type=\"button\" className=\"btn btn-primary btn-block\" onClick={this.LoginClick}>Submit</button>\n            </form>\n          </div>\n      );\n  }\n}\n\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}